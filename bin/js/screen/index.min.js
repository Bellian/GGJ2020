!function i(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return l(a[t][1][e]||e)},o,o.exports,i,a,s,c)}return s[t].exports}for(var u="function"==typeof require&&require,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(e){n.ARRAY_TYPE=o=e},n.toRadian=function(e){return e*a},n.equals=function(e,t){return Math.abs(e-t)<=r*Math.max(1,Math.abs(e),Math.abs(t))},n.RANDOM=n.ARRAY_TYPE=n.EPSILON=void 0;var r=1e-6;n.EPSILON=r;var o="undefined"!=typeof Float32Array?Float32Array:Array;n.ARRAY_TYPE=o;var i=Math.random;n.RANDOM=i;var a=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var r=p(e("./common.js"));n.glMatrix=r;var o=p(e("./mat2.js"));n.mat2=o;var i=p(e("./mat2d.js"));n.mat2d=i;var a=p(e("./mat3.js"));n.mat3=a;var s=p(e("./mat4.js"));n.mat4=s;var c=p(e("./quat.js"));n.quat=c;var l=p(e("./quat2.js"));n.quat2=l;var u=p(e("./vec2.js"));n.vec2=u;var d=p(e("./vec3.js"));n.vec3=d;var f=p(e("./vec4.js"));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}n.vec4=f},{"./common.js":1,"./mat2.js":3,"./mat2d.js":4,"./mat3.js":5,"./mat4.js":6,"./quat.js":7,"./quat2.js":8,"./vec2.js":9,"./vec3.js":10,"./vec4.js":11}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var e=new u.ARRAY_TYPE(4);u.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0);return e[0]=1,e[3]=1,e},n.clone=function(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},n.fromValues=function(e,t,n,r){var o=new u.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o},n.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},n.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},n.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null},n.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},n.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},n.multiply=r,n.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*s,e[1]=o*c+a*s,e[2]=r*-s+i*c,e[3]=o*-s+a*c,e},n.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],c=n[1];return e[0]=r*s,e[1]=o*s,e[2]=i*c,e[3]=a*c,e},n.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},n.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},n.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},n.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},n.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},n.subtract=o,n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-a)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-c)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-l)<=u.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},n.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},n.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},n.sub=n.mul=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*s+i*c,e[1]=o*s+a*c,e[2]=r*l+i*u,e[3]=o*l+a*u,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}var i=r;n.mul=i;var a=o;n.sub=a},{"./common.js":1}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var e=new v.ARRAY_TYPE(6);v.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0);return e[0]=1,e[3]=1,e},n.clone=function(e){var t=new v.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},n.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},n.fromValues=function(e,t,n,r,o,i){var a=new v.ARRAY_TYPE(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=o,a[5]=i,a},n.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},n.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=n*i-r*o;return c?(c=1/c,e[0]=i*c,e[1]=-r*c,e[2]=-o*c,e[3]=n*c,e[4]=(o*s-i*a)*c,e[5]=(r*a-n*s)*c,e):null},n.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},n.multiply=r,n.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*l,e[1]=o*u+a*l,e[2]=r*-l+i*u,e[3]=o*-l+a*u,e[4]=s,e[5]=c,e},n.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r*l,e[1]=o*l,e[2]=i*u,e[3]=a*u,e[4]=s,e[5]=c,e},n.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*l+i*u+s,e[5]=o*l+a*u+c,e},n.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},n.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},n.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},n.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},n.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},n.subtract=o,n.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},n.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],c=t[0],l=t[1],u=t[2],d=t[3],f=t[4],p=t[5];return Math.abs(n-c)<=v.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-l)<=v.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-u)<=v.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-d)<=v.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-f)<=v.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(s-p)<=v.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},n.sub=n.mul=void 0;var v=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=n[0],u=n[1],d=n[2],f=n[3],p=n[4],v=n[5];return e[0]=r*l+i*u,e[1]=o*l+a*u,e[2]=r*d+i*f,e[3]=o*d+a*f,e[4]=r*p+i*v+s,e[5]=o*p+a*v+c,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}var i=r;n.mul=i;var a=o;n.sub=a},{"./common.js":1}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var e=new b.ARRAY_TYPE(9);b.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0);return e[0]=1,e[4]=1,e[8]=1,e},n.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},n.clone=function(e){var t=new b.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.fromValues=function(e,t,n,r,o,i,a,s,c){var l=new b.ARRAY_TYPE(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=o,l[5]=i,l[6]=a,l[7]=s,l[8]=c,l},n.set=function(e,t,n,r,o,i,a,s,c,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=c,e[8]=l,e},n.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},n.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},n.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=u*a-s*l,f=-u*i+s*c,p=l*i-a*c,v=n*d+r*f+o*p;return v?(v=1/v,e[0]=d*v,e[1]=(-u*r+o*l)*v,e[2]=(s*r-o*a)*v,e[3]=f*v,e[4]=(u*n-o*c)*v,e[5]=(-s*n+o*i)*v,e[6]=p*v,e[7]=(-l*n+r*c)*v,e[8]=(a*n-r*i)*v,e):null},n.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8];return e[0]=a*u-s*l,e[1]=o*l-r*u,e[2]=r*s-o*a,e[3]=s*c-i*u,e[4]=n*u-o*c,e[5]=o*i-n*s,e[6]=i*l-a*c,e[7]=r*c-n*l,e[8]=n*a-r*i,e},n.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*(l*i-a*c)+n*(-l*o+a*s)+r*(c*o-i*s)},n.multiply=r,n.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=c,e[6]=f*r+p*a+l,e[7]=f*o+p*s+u,e[8]=f*i+p*c+d,e},n.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=Math.sin(n),p=Math.cos(n);return e[0]=p*r+f*a,e[1]=p*o+f*s,e[2]=p*i+f*c,e[3]=p*a-f*r,e[4]=p*s-f*o,e[5]=p*c-f*i,e[6]=l,e[7]=u,e[8]=d,e},n.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},n.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},n.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},n.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},n.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},n.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,c=o+o,l=n*a,u=r*a,d=r*s,f=o*a,p=o*s,v=o*c,m=i*a,h=i*s,y=i*c;return e[0]=1-d-v,e[3]=u-y,e[6]=f+h,e[1]=u+y,e[4]=1-l-v,e[7]=p-m,e[2]=f-h,e[5]=p+m,e[8]=1-l-d,e},n.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],v=t[12],m=t[13],h=t[14],y=t[15],g=n*s-r*a,x=n*c-o*a,b=n*l-i*a,M=r*c-o*s,w=r*l-i*s,P=o*l-i*c,S=u*m-d*v,A=u*h-f*v,C=u*y-p*v,I=d*h-f*m,O=d*y-p*m,_=f*y-p*h,R=g*_-x*O+b*I+M*C-w*A+P*S;return R?(R=1/R,e[0]=(s*_-c*O+l*I)*R,e[1]=(c*C-a*_-l*A)*R,e[2]=(a*O-s*C+l*S)*R,e[3]=(o*O-r*_-i*I)*R,e[4]=(n*_-o*C+i*A)*R,e[5]=(r*C-n*O-i*S)*R,e[6]=(m*P-h*w+y*M)*R,e[7]=(h*b-v*P-y*x)*R,e[8]=(v*w-m*b+y*g)*R,e):null},n.projection=function(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},n.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},n.frob=function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},n.subtract=o,n.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},n.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=t[0],f=t[1],p=t[2],v=t[3],m=t[4],h=t[5],y=t[6],g=t[7],x=t[8];return Math.abs(n-d)<=b.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-f)<=b.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-p)<=b.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-v)<=b.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-m)<=b.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-h)<=b.EPSILON*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(c-y)<=b.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-g)<=b.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(u-x)<=b.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))},n.sub=n.mul=void 0;var b=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=n[0],p=n[1],v=n[2],m=n[3],h=n[4],y=n[5],g=n[6],x=n[7],b=n[8];return e[0]=f*r+p*a+v*l,e[1]=f*o+p*s+v*u,e[2]=f*i+p*c+v*d,e[3]=m*r+h*a+y*l,e[4]=m*o+h*s+y*u,e[5]=m*i+h*c+y*d,e[6]=g*r+x*a+b*l,e[7]=g*o+x*s+b*u,e[8]=g*i+x*c+b*d,e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}var i=r;n.mul=i;var a=o;n.sub=a},{"./common.js":1}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var e=new k.ARRAY_TYPE(16);k.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},n.clone=function(e){var t=new k.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.fromValues=function(e,t,n,r,o,i,a,s,c,l,u,d,f,p,v,m){var h=new k.ARRAY_TYPE(16);return h[0]=e,h[1]=t,h[2]=n,h[3]=r,h[4]=o,h[5]=i,h[6]=a,h[7]=s,h[8]=c,h[9]=l,h[10]=u,h[11]=d,h[12]=f,h[13]=p,h[14]=v,h[15]=m,h},n.set=function(e,t,n,r,o,i,a,s,c,l,u,d,f,p,v,m,h){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=c,e[8]=l,e[9]=u,e[10]=d,e[11]=f,e[12]=p,e[13]=v,e[14]=m,e[15]=h,e},n.identity=P,n.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},n.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],v=t[12],m=t[13],h=t[14],y=t[15],g=n*s-r*a,x=n*c-o*a,b=n*l-i*a,M=r*c-o*s,w=r*l-i*s,P=o*l-i*c,S=u*m-d*v,A=u*h-f*v,C=u*y-p*v,I=d*h-f*m,O=d*y-p*m,_=f*y-p*h,R=g*_-x*O+b*I+M*C-w*A+P*S;return R?(R=1/R,e[0]=(s*_-c*O+l*I)*R,e[1]=(o*O-r*_-i*I)*R,e[2]=(m*P-h*w+y*M)*R,e[3]=(f*w-d*P-p*M)*R,e[4]=(c*C-a*_-l*A)*R,e[5]=(n*_-o*C+i*A)*R,e[6]=(h*b-v*P-y*x)*R,e[7]=(u*P-f*b+p*x)*R,e[8]=(a*O-s*C+l*S)*R,e[9]=(r*C-n*O-i*S)*R,e[10]=(v*w-m*b+y*g)*R,e[11]=(d*b-u*w-p*g)*R,e[12]=(s*A-a*I-c*S)*R,e[13]=(n*I-r*A+o*S)*R,e[14]=(m*x-v*M-h*g)*R,e[15]=(u*M-d*x+f*g)*R,e):null},n.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],p=t[11],v=t[12],m=t[13],h=t[14],y=t[15];return e[0]=s*(f*y-p*h)-d*(c*y-l*h)+m*(c*p-l*f),e[1]=-(r*(f*y-p*h)-d*(o*y-i*h)+m*(o*p-i*f)),e[2]=r*(c*y-l*h)-s*(o*y-i*h)+m*(o*l-i*c),e[3]=-(r*(c*p-l*f)-s*(o*p-i*f)+d*(o*l-i*c)),e[4]=-(a*(f*y-p*h)-u*(c*y-l*h)+v*(c*p-l*f)),e[5]=n*(f*y-p*h)-u*(o*y-i*h)+v*(o*p-i*f),e[6]=-(n*(c*y-l*h)-a*(o*y-i*h)+v*(o*l-i*c)),e[7]=n*(c*p-l*f)-a*(o*p-i*f)+u*(o*l-i*c),e[8]=a*(d*y-p*m)-u*(s*y-l*m)+v*(s*p-l*d),e[9]=-(n*(d*y-p*m)-u*(r*y-i*m)+v*(r*p-i*d)),e[10]=n*(s*y-l*m)-a*(r*y-i*m)+v*(r*l-i*s),e[11]=-(n*(s*p-l*d)-a*(r*p-i*d)+u*(r*l-i*s)),e[12]=-(a*(d*h-f*m)-u*(s*h-c*m)+v*(s*f-c*d)),e[13]=n*(d*h-f*m)-u*(r*h-o*m)+v*(r*f-o*d),e[14]=-(n*(s*h-c*m)-a*(r*h-o*m)+v*(r*c-o*s)),e[15]=n*(s*f-c*d)-a*(r*f-o*d)+u*(r*c-o*s),e},n.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],d=e[10],f=e[11],p=e[12],v=e[13],m=e[14],h=e[15];return(t*a-n*i)*(d*h-f*m)-(t*s-r*i)*(u*h-f*v)+(t*c-o*i)*(u*m-d*v)+(n*s-r*a)*(l*h-f*p)-(n*c-o*a)*(l*m-d*p)+(r*c-o*s)*(l*v-u*p)},n.multiply=r,n.translate=function(e,t,n){var r,o,i,a,s,c,l,u,d,f,p,v,m=n[0],h=n[1],y=n[2];t===e?(e[12]=t[0]*m+t[4]*h+t[8]*y+t[12],e[13]=t[1]*m+t[5]*h+t[9]*y+t[13],e[14]=t[2]*m+t[6]*h+t[10]*y+t[14],e[15]=t[3]*m+t[7]*h+t[11]*y+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],v=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=s,e[5]=c,e[6]=l,e[7]=u,e[8]=d,e[9]=f,e[10]=p,e[11]=v,e[12]=r*m+s*h+d*y+t[12],e[13]=o*m+c*h+f*y+t[13],e[14]=i*m+l*h+p*y+t[14],e[15]=a*m+u*h+v*y+t[15]);return e},n.scale=function(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},n.rotate=function(e,t,n,r){var o,i,a,s,c,l,u,d,f,p,v,m,h,y,g,x,b,M,w,P,S,A,C,I,O=r[0],_=r[1],R=r[2],B=Math.hypot(O,_,R);if(B<k.EPSILON)return null;O*=B=1/B,_*=B,R*=B,o=Math.sin(n),i=Math.cos(n),a=1-i,s=t[0],c=t[1],l=t[2],u=t[3],d=t[4],f=t[5],p=t[6],v=t[7],m=t[8],h=t[9],y=t[10],g=t[11],x=O*O*a+i,b=_*O*a+R*o,M=R*O*a-_*o,w=O*_*a-R*o,P=_*_*a+i,S=R*_*a+O*o,A=O*R*a+_*o,C=_*R*a-O*o,I=R*R*a+i,e[0]=s*x+d*b+m*M,e[1]=c*x+f*b+h*M,e[2]=l*x+p*b+y*M,e[3]=u*x+v*b+g*M,e[4]=s*w+d*P+m*S,e[5]=c*w+f*P+h*S,e[6]=l*w+p*P+y*S,e[7]=u*w+v*P+g*S,e[8]=s*A+d*C+m*I,e[9]=c*A+f*C+h*I,e[10]=l*A+p*C+y*I,e[11]=u*A+v*C+g*I,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e},n.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],s=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[4]=i*o+l*r,e[5]=a*o+u*r,e[6]=s*o+d*r,e[7]=c*o+f*r,e[8]=l*o-i*r,e[9]=u*o-a*r,e[10]=d*o-s*r,e[11]=f*o-c*r,e},n.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],c=t[3],l=t[8],u=t[9],d=t[10],f=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*o-l*r,e[1]=a*o-u*r,e[2]=s*o-d*r,e[3]=c*o-f*r,e[8]=i*r+l*o,e[9]=a*r+u*o,e[10]=s*r+d*o,e[11]=c*r+f*o,e},n.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],s=t[2],c=t[3],l=t[4],u=t[5],d=t[6],f=t[7];t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);return e[0]=i*o+l*r,e[1]=a*o+u*r,e[2]=s*o+d*r,e[3]=c*o+f*r,e[4]=l*o-i*r,e[5]=u*o-a*r,e[6]=d*o-s*r,e[7]=f*o-c*r,e},n.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},n.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.fromRotation=function(e,t,n){var r,o,i,a=n[0],s=n[1],c=n[2],l=Math.hypot(a,s,c);if(l<k.EPSILON)return null;return a*=l=1/l,s*=l,c*=l,r=Math.sin(t),o=Math.cos(t),i=1-o,e[0]=a*a*i+o,e[1]=s*a*i+c*r,e[2]=c*a*i-s*r,e[3]=0,e[4]=a*s*i-c*r,e[5]=s*s*i+o,e[6]=c*s*i+a*r,e[7]=0,e[8]=a*c*i+s*r,e[9]=s*c*i-a*r,e[10]=c*c*i+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.fromRotationTranslation=f,n.fromQuat2=function(e,t){var n=new k.ARRAY_TYPE(3),r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=r*r+o*o+i*i+a*a;0<d?(n[0]=2*(s*a+u*r+c*i-l*o)/d,n[1]=2*(c*a+u*o+l*r-s*i)/d,n[2]=2*(l*a+u*i+s*o-c*r)/d):(n[0]=2*(s*a+u*r+c*i-l*o),n[1]=2*(c*a+u*o+l*r-s*i),n[2]=2*(l*a+u*i+s*o-c*r));return f(e,t,n),e},n.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},n.getScaling=y,n.getRotation=function(e,t){var n=new k.ARRAY_TYPE(3);y(n,t);var r=1/n[0],o=1/n[1],i=1/n[2],a=t[0]*r,s=t[1]*o,c=t[2]*i,l=t[4]*r,u=t[5]*o,d=t[6]*i,f=t[8]*r,p=t[9]*o,v=t[10]*i,m=a+u+v,h=0;0<m?(h=2*Math.sqrt(1+m),e[3]=.25*h,e[0]=(d-p)/h,e[1]=(f-c)/h,e[2]=(s-l)/h):u<a&&v<a?(h=2*Math.sqrt(1+a-u-v),e[3]=(d-p)/h,e[0]=.25*h,e[1]=(s+l)/h,e[2]=(f+c)/h):v<u?(h=2*Math.sqrt(1+u-a-v),e[3]=(f-c)/h,e[0]=(s+l)/h,e[1]=.25*h,e[2]=(d+p)/h):(h=2*Math.sqrt(1+v-a-u),e[3]=(s-l)/h,e[0]=(f+c)/h,e[1]=(d+p)/h,e[2]=.25*h);return e},n.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3],c=o+o,l=i+i,u=a+a,d=o*c,f=o*l,p=o*u,v=i*l,m=i*u,h=a*u,y=s*c,g=s*l,x=s*u,b=r[0],M=r[1],w=r[2];return e[0]=(1-(v+h))*b,e[1]=(f+x)*b,e[2]=(p-g)*b,e[3]=0,e[4]=(f-x)*M,e[5]=(1-(d+h))*M,e[6]=(m+y)*M,e[7]=0,e[8]=(p+g)*w,e[9]=(m-y)*w,e[10]=(1-(d+v))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},n.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],s=t[2],c=t[3],l=i+i,u=a+a,d=s+s,f=i*l,p=i*u,v=i*d,m=a*u,h=a*d,y=s*d,g=c*l,x=c*u,b=c*d,M=r[0],w=r[1],P=r[2],S=o[0],A=o[1],C=o[2],I=(1-(m+y))*M,O=(p+b)*M,_=(v-x)*M,R=(p-b)*w,B=(1-(f+y))*w,E=(h+g)*w,T=(v+x)*P,k=(h-g)*P,L=(1-(f+m))*P;return e[0]=I,e[1]=O,e[2]=_,e[3]=0,e[4]=R,e[5]=B,e[6]=E,e[7]=0,e[8]=T,e[9]=k,e[10]=L,e[11]=0,e[12]=n[0]+S-(I*S+R*A+T*C),e[13]=n[1]+A-(O*S+B*A+k*C),e[14]=n[2]+C-(_*S+E*A+L*C),e[15]=1,e},n.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,s=r+r,c=o+o,l=n*a,u=r*a,d=r*s,f=o*a,p=o*s,v=o*c,m=i*a,h=i*s,y=i*c;return e[0]=1-d-v,e[1]=u+y,e[2]=f-h,e[3]=0,e[4]=u-y,e[5]=1-l-v,e[6]=p+m,e[7]=0,e[8]=f+h,e[9]=p-m,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},n.frustum=function(e,t,n,r,o,i,a){var s=1/(n-t),c=1/(o-r),l=1/(i-a);return e[0]=2*i*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*c,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(o+r)*c,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*l,e[15]=0,e},n.perspective=function(e,t,n,r,o){var i,a=1/Math.tan(t/2);e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(i=1/(r-o),e[10]=(o+r)*i,e[14]=2*o*r*i):(e[10]=-1,e[14]=-2*r);return e},n.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),c=2/(a+s),l=2/(o+i);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-s)*c*.5,e[9]=(o-i)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},n.ortho=function(e,t,n,r,o,i,a){var s=1/(t-n),c=1/(r-o),l=1/(i-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(o+r)*c,e[14]=(a+i)*l,e[15]=1,e},n.lookAt=function(e,t,n,r){var o,i,a,s,c,l,u,d,f,p,v=t[0],m=t[1],h=t[2],y=r[0],g=r[1],x=r[2],b=n[0],M=n[1],w=n[2];if(Math.abs(v-b)<k.EPSILON&&Math.abs(m-M)<k.EPSILON&&Math.abs(h-w)<k.EPSILON)return P(e);u=v-b,d=m-M,f=h-w,p=1/Math.hypot(u,d,f),o=g*(f*=p)-x*(d*=p),i=x*(u*=p)-y*f,a=y*d-g*u,(p=Math.hypot(o,i,a))?(o*=p=1/p,i*=p,a*=p):a=i=o=0;s=d*a-f*i,c=f*o-u*a,l=u*i-d*o,(p=Math.hypot(s,c,l))?(s*=p=1/p,c*=p,l*=p):l=c=s=0;return e[0]=o,e[1]=s,e[2]=u,e[3]=0,e[4]=i,e[5]=c,e[6]=d,e[7]=0,e[8]=a,e[9]=l,e[10]=f,e[11]=0,e[12]=-(o*v+i*m+a*h),e[13]=-(s*v+c*m+l*h),e[14]=-(u*v+d*m+f*h),e[15]=1,e},n.targetTo=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=r[0],c=r[1],l=r[2],u=o-n[0],d=i-n[1],f=a-n[2],p=u*u+d*d+f*f;0<p&&(p=1/Math.sqrt(p),u*=p,d*=p,f*=p);var v=c*f-l*d,m=l*u-s*f,h=s*d-c*u;0<(p=v*v+m*m+h*h)&&(p=1/Math.sqrt(p),v*=p,m*=p,h*=p);return e[0]=v,e[1]=m,e[2]=h,e[3]=0,e[4]=d*h-f*m,e[5]=f*v-u*h,e[6]=u*m-d*v,e[7]=0,e[8]=u,e[9]=d,e[10]=f,e[11]=0,e[12]=o,e[13]=i,e[14]=a,e[15]=1,e},n.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},n.frob=function(e){return Math.hypot(e[0],e[1],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},n.subtract=o,n.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},n.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=e[8],d=e[9],f=e[10],p=e[11],v=e[12],m=e[13],h=e[14],y=e[15],g=t[0],x=t[1],b=t[2],M=t[3],w=t[4],P=t[5],S=t[6],A=t[7],C=t[8],I=t[9],O=t[10],_=t[11],R=t[12],B=t[13],E=t[14],T=t[15];return Math.abs(n-g)<=k.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-x)<=k.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(o-b)<=k.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-M)<=k.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-w)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-P)<=k.EPSILON*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(c-S)<=k.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-A)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(u-C)<=k.EPSILON*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(d-I)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(f-O)<=k.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(p-_)<=k.EPSILON*Math.max(1,Math.abs(p),Math.abs(_))&&Math.abs(v-R)<=k.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(m-B)<=k.EPSILON*Math.max(1,Math.abs(m),Math.abs(B))&&Math.abs(h-E)<=k.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(y-T)<=k.EPSILON*Math.max(1,Math.abs(y),Math.abs(T))},n.sub=n.mul=void 0;var k=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function P(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function r(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=t[8],f=t[9],p=t[10],v=t[11],m=t[12],h=t[13],y=t[14],g=t[15],x=n[0],b=n[1],M=n[2],w=n[3];return e[0]=x*r+b*s+M*d+w*m,e[1]=x*o+b*c+M*f+w*h,e[2]=x*i+b*l+M*p+w*y,e[3]=x*a+b*u+M*v+w*g,x=n[4],b=n[5],M=n[6],w=n[7],e[4]=x*r+b*s+M*d+w*m,e[5]=x*o+b*c+M*f+w*h,e[6]=x*i+b*l+M*p+w*y,e[7]=x*a+b*u+M*v+w*g,x=n[8],b=n[9],M=n[10],w=n[11],e[8]=x*r+b*s+M*d+w*m,e[9]=x*o+b*c+M*f+w*h,e[10]=x*i+b*l+M*p+w*y,e[11]=x*a+b*u+M*v+w*g,x=n[12],b=n[13],M=n[14],w=n[15],e[12]=x*r+b*s+M*d+w*m,e[13]=x*o+b*c+M*f+w*h,e[14]=x*i+b*l+M*p+w*y,e[15]=x*a+b*u+M*v+w*g,e}function f(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=r+r,c=o+o,l=i+i,u=r*s,d=r*c,f=r*l,p=o*c,v=o*l,m=i*l,h=a*s,y=a*c,g=a*l;return e[0]=1-(p+m),e[1]=d+g,e[2]=f-y,e[3]=0,e[4]=d-g,e[5]=1-(u+m),e[6]=v+h,e[7]=0,e[8]=f+y,e[9]=v-h,e[10]=1-(u+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function y(e,t){var n=t[0],r=t[1],o=t[2],i=t[4],a=t[5],s=t[6],c=t[8],l=t[9],u=t[10];return e[0]=Math.hypot(n,r,o),e[1]=Math.hypot(i,a,s),e[2]=Math.hypot(c,l,u),e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}var i=r;n.mul=i;var a=o;n.sub=a},{"./common.js":1}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=s,n.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},n.setAxisAngle=c,n.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);r>y.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0);return n},n.getAngle=function(e,t){var n=w(e,t);return Math.acos(2*n*n-1)},n.multiply=l,n.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*s,e[1]=o*c+i*s,e[2]=i*c-o*s,e[3]=a*c-r*s,e},n.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c-i*s,e[1]=o*c+a*s,e[2]=i*c+r*s,e[3]=a*c-o*s,e},n.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],s=Math.sin(n),c=Math.cos(n);return e[0]=r*c+o*s,e[1]=o*c-r*s,e[2]=i*c+a*s,e[3]=a*c-i*s,e},n.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},n.exp=u,n.ln=d,n.pow=function(e,t,n){return d(e,t),M(e,e,n),u(e,e),e},n.slerp=f,n.random=function(e){var t=y.RANDOM(),n=y.RANDOM(),r=y.RANDOM(),o=Math.sqrt(1-t),i=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=i*Math.sin(2*Math.PI*r),e[3]=i*Math.cos(2*Math.PI*r),e},n.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-o*s,e[3]=i*s,e},n.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},n.fromMat3=p,n.fromEuler=function(e,t,n,r){var o=.5*Math.PI/180;t*=o,n*=o,r*=o;var i=Math.sin(t),a=Math.cos(t),s=Math.sin(n),c=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return e[0]=i*c*u-a*s*l,e[1]=a*s*u+i*c*l,e[2]=a*c*l-i*s*u,e[3]=a*c*u+i*s*l,e},n.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0;var y=a(e("./common.js")),r=a(e("./mat3.js")),o=a(e("./vec3.js")),i=a(e("./vec4.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function s(){var e=new y.ARRAY_TYPE(4);return y.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function c(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function l(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+a*s+o*l-i*c,e[1]=o*u+a*c+i*s-r*l,e[2]=i*u+a*l+r*c-o*s,e[3]=a*u-r*s-o*c-i*l,e}function u(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=Math.sqrt(n*n+r*r+o*o),s=Math.exp(i),c=0<a?s*Math.sin(a)/a:0;return e[0]=n*c,e[1]=r*c,e[2]=o*c,e[3]=s*Math.cos(a),e}function d(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=Math.sqrt(n*n+r*r+o*o),s=0<a?Math.atan2(a,i)/a:0;return e[0]=n*s,e[1]=r*s,e[2]=o*s,e[3]=.5*Math.log(n*n+r*r+o*o+i*i),e}function f(e,t,n,r){var o,i,a,s,c,l=t[0],u=t[1],d=t[2],f=t[3],p=n[0],v=n[1],m=n[2],h=n[3];return(i=l*p+u*v+d*m+f*h)<0&&(i=-i,p=-p,v=-v,m=-m,h=-h),c=1-i>y.EPSILON?(o=Math.acos(i),a=Math.sin(o),s=Math.sin((1-r)*o)/a,Math.sin(r*o)/a):(s=1-r,r),e[0]=s*l+c*p,e[1]=s*u+c*v,e[2]=s*d+c*m,e[3]=s*f+c*h,e}function p(e,t){var n,r=t[0]+t[4]+t[8];if(0<r)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e}var v=i.clone;n.clone=v;var m=i.fromValues;n.fromValues=m;var h=i.copy;n.copy=h;var g=i.set;n.set=g;var x=i.add;n.add=x;var b=l;n.mul=b;var M=i.scale;n.scale=M;var w=i.dot;n.dot=w;var P=i.lerp;n.lerp=P;var S=i.length,A=n.length=S;n.len=A;var C=i.squaredLength,I=n.squaredLength=C;n.sqrLen=I;var O=i.normalize;n.normalize=O;var _=i.exactEquals;n.exactEquals=_;var R=i.equals;n.equals=R;var B,E,T,k=(B=o.create(),E=o.fromValues(1,0,0),T=o.fromValues(0,1,0),function(e,t,n){var r=o.dot(t,n);return r<-.999999?(o.cross(B,E,t),o.len(B)<1e-6&&o.cross(B,T,t),o.normalize(B,B),c(e,B,Math.PI),e):.999999<r?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(o.cross(B,t,n),e[0]=B[0],e[1]=B[1],e[2]=B[2],e[3]=1+r,O(e,e))});n.rotationTo=k;var L,j,q=(L=s(),j=s(),function(e,t,n,r,o,i){return f(L,t,o,i),f(j,n,r,i),f(e,L,j,2*i*(1-i)),e});n.sqlerp=q;var V,N=(V=r.create(),function(e,t,n,r){return V[0]=n[0],V[3]=n[1],V[6]=n[2],V[1]=r[0],V[4]=r[1],V[7]=r[2],V[2]=-t[0],V[5]=-t[1],V[8]=-t[2],O(e,p(e,V))});n.setAxes=N},{"./common.js":1,"./mat3.js":5,"./vec3.js":10,"./vec4.js":11}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=function(){var e=new g.ARRAY_TYPE(8);g.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0);return e[3]=1,e},n.clone=function(e){var t=new g.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},n.fromValues=function(e,t,n,r,o,i,a,s){var c=new g.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=o,c[5]=i,c[6]=a,c[7]=s,c},n.fromRotationTranslationValues=function(e,t,n,r,o,i,a){var s=new g.ARRAY_TYPE(8);s[0]=e,s[1]=t,s[2]=n,s[3]=r;var c=.5*o,l=.5*i,u=.5*a;return s[4]=c*r+l*n-u*t,s[5]=l*r+u*e-c*n,s[6]=u*r+c*t-l*e,s[7]=-c*e-l*t-u*n,s},n.fromRotationTranslation=i,n.fromTranslation=function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},n.fromRotation=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},n.fromMat4=function(e,t){var n=m.create();o.getRotation(n,t);var r=new g.ARRAY_TYPE(3);return o.getTranslation(r,t),i(e,n,r),e},n.copy=x,n.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},n.set=function(e,t,n,r,o,i,a,s,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=s,e[7]=c,e},n.getDual=function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},n.setDual=function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},n.getTranslation=function(e,t){var n=t[4],r=t[5],o=t[6],i=t[7],a=-t[0],s=-t[1],c=-t[2],l=t[3];return e[0]=2*(n*l+i*a+r*c-o*s),e[1]=2*(r*l+i*s+o*a-n*c),e[2]=2*(o*l+i*c+n*s-r*a),e},n.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=.5*n[0],c=.5*n[1],l=.5*n[2],u=t[4],d=t[5],f=t[6],p=t[7];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=a*s+o*l-i*c+u,e[5]=a*c+i*s-r*l+d,e[6]=a*l+r*c-o*s+f,e[7]=-r*s-o*c-i*l+p,e},n.rotateX=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=s*a+u*r+c*i-l*o,f=c*a+u*o+l*r-s*i,p=l*a+u*i+s*o-c*r,v=u*a-s*r-c*o-l*i;return m.rotateX(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=d*a+v*r+f*i-p*o,e[5]=f*a+v*o+p*r-d*i,e[6]=p*a+v*i+d*o-f*r,e[7]=v*a-d*r-f*o-p*i,e},n.rotateY=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=s*a+u*r+c*i-l*o,f=c*a+u*o+l*r-s*i,p=l*a+u*i+s*o-c*r,v=u*a-s*r-c*o-l*i;return m.rotateY(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=d*a+v*r+f*i-p*o,e[5]=f*a+v*o+p*r-d*i,e[6]=p*a+v*i+d*o-f*r,e[7]=v*a-d*r-f*o-p*i,e},n.rotateZ=function(e,t,n){var r=-t[0],o=-t[1],i=-t[2],a=t[3],s=t[4],c=t[5],l=t[6],u=t[7],d=s*a+u*r+c*i-l*o,f=c*a+u*o+l*r-s*i,p=l*a+u*i+s*o-c*r,v=u*a-s*r-c*o-l*i;return m.rotateZ(e,t,n),r=e[0],o=e[1],i=e[2],a=e[3],e[4]=d*a+v*r+f*i-p*o,e[5]=f*a+v*o+p*r-d*i,e[6]=p*a+v*i+d*o-f*r,e[7]=v*a-d*r-f*o-p*i,e},n.rotateByQuatAppend=function(e,t,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=t[0],c=t[1],l=t[2],u=t[3];return e[0]=s*a+u*r+c*i-l*o,e[1]=c*a+u*o+l*r-s*i,e[2]=l*a+u*i+s*o-c*r,e[3]=u*a-s*r-c*o-l*i,s=t[4],c=t[5],l=t[6],u=t[7],e[4]=s*a+u*r+c*i-l*o,e[5]=c*a+u*o+l*r-s*i,e[6]=l*a+u*i+s*o-c*r,e[7]=u*a-s*r-c*o-l*i,e},n.rotateByQuatPrepend=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[0],c=n[1],l=n[2],u=n[3];return e[0]=r*u+a*s+o*l-i*c,e[1]=o*u+a*c+i*s-r*l,e[2]=i*u+a*l+r*c-o*s,e[3]=a*u-r*s-o*c-i*l,s=n[4],c=n[5],l=n[6],u=n[7],e[4]=r*u+a*s+o*l-i*c,e[5]=o*u+a*c+i*s-r*l,e[6]=i*u+a*l+r*c-o*s,e[7]=a*u-r*s-o*c-i*l,e},n.rotateAroundAxis=function(e,t,n,r){if(Math.abs(r)<g.EPSILON)return x(e,t);var o=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),a=i*n[0]/o,s=i*n[1]/o,c=i*n[2]/o,l=Math.cos(r),u=t[0],d=t[1],f=t[2],p=t[3];e[0]=u*l+p*a+d*c-f*s,e[1]=d*l+p*s+f*a-u*c,e[2]=f*l+p*c+u*s-d*a,e[3]=p*l-u*a-d*s-f*c;var v=t[4],m=t[5],h=t[6],y=t[7];return e[4]=v*l+y*a+m*c-h*s,e[5]=m*l+y*s+h*a-v*c,e[6]=h*l+y*c+v*s-m*a,e[7]=y*l-v*a-m*s-h*c,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e},n.multiply=c,n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e},n.lerp=function(e,t,n,r){var o=1-r;u(t,n)<0&&(r=-r);return e[0]=t[0]*o+n[0]*r,e[1]=t[1]*o+n[1]*r,e[2]=t[2]*o+n[2]*r,e[3]=t[3]*o+n[3]*r,e[4]=t[4]*o+n[4]*r,e[5]=t[5]*o+n[5]*r,e[6]=t[6]*o+n[6]*r,e[7]=t[7]*o+n[7]*r,e},n.invert=function(e,t){var n=p(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e},n.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},n.normalize=function(e,t){var n=p(t);if(0<n){n=Math.sqrt(n);var r=t[0]/n,o=t[1]/n,i=t[2]/n,a=t[3]/n,s=t[4],c=t[5],l=t[6],u=t[7],d=r*s+o*c+i*l+a*u;e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=(s-r*d)/n,e[5]=(c-o*d)/n,e[6]=(l-i*d)/n,e[7]=(u-a*d)/n}return e},n.str=function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=e[4],s=e[5],c=e[6],l=e[7],u=t[0],d=t[1],f=t[2],p=t[3],v=t[4],m=t[5],h=t[6],y=t[7];return Math.abs(n-u)<=g.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-d)<=g.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-f)<=g.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(i-p)<=g.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=g.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-m)<=g.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-h)<=g.EPSILON*Math.max(1,Math.abs(c),Math.abs(h))&&Math.abs(l-y)<=g.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},n.sqrLen=n.squaredLength=n.len=n.length=n.dot=n.mul=n.setReal=n.getReal=void 0;var g=r(e("./common.js")),m=r(e("./quat.js")),o=r(e("./mat4.js"));function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}function i(e,t,n){var r=.5*n[0],o=.5*n[1],i=.5*n[2],a=t[0],s=t[1],c=t[2],l=t[3];return e[0]=a,e[1]=s,e[2]=c,e[3]=l,e[4]=r*l+o*c-i*s,e[5]=o*l+i*a-r*c,e[6]=i*l+r*s-o*a,e[7]=-r*a-o*s-i*c,e}function x(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}var a=m.copy;n.getReal=a;var s=m.copy;function c(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],s=n[4],c=n[5],l=n[6],u=n[7],d=t[4],f=t[5],p=t[6],v=t[7],m=n[0],h=n[1],y=n[2],g=n[3];return e[0]=r*g+a*m+o*y-i*h,e[1]=o*g+a*h+i*m-r*y,e[2]=i*g+a*y+r*h-o*m,e[3]=a*g-r*m-o*h-i*y,e[4]=r*u+a*s+o*l-i*c+d*g+v*m+f*y-p*h,e[5]=o*u+a*c+i*s-r*l+f*g+v*h+p*m-d*y,e[6]=i*u+a*l+r*c-o*s+p*g+v*y+d*h-f*m,e[7]=a*u-r*s-o*c-i*l+v*g-d*m-f*h-p*y,e}n.setReal=s;var l=c;n.mul=l;var u=m.dot;n.dot=u;var d=m.length,f=n.length=d;n.len=f;var p=m.squaredLength,v=n.squaredLength=p;n.sqrLen=v},{"./common.js":1,"./mat4.js":6,"./quat.js":7}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(e){var t=new a.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},n.fromValues=function(e,t){var n=new a.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},n.set=function(e,t,n){return e[0]=t,e[1]=n,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},n.subtract=o,n.multiply=i,n.divide=s,n.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},n.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},n.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},n.distance=c,n.squaredDistance=l,n.length=u,n.squaredLength=d,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},n.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},n.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;0<o&&(o=1/Math.sqrt(o));return e[0]=t[0]*o,e[1]=t[1]*o,e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},n.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},n.lerp=function(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e},n.random=function(e,t){t=t||1;var n=2*a.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},n.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},n.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},n.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},n.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},n.rotate=function(e,t,n,r){var o=t[0]-n[0],i=t[1]-n[1],a=Math.sin(r),s=Math.cos(r);return e[0]=o*s-i*a+n[0],e[1]=o*a+i*s+n[1],e},n.angle=function(e,t){var n=e[0],r=e[1],o=t[0],i=t[1],a=n*n+r*r;0<a&&(a=1/Math.sqrt(a));var s=o*o+i*i;0<s&&(s=1/Math.sqrt(s));var c=(n*o+r*i)*a*s;return 1<c?0:c<-1?Math.PI:Math.acos(c)},n.zero=function(e){return e[0]=0,e[1]=0,e},n.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},n.equals=function(e,t){var n=e[0],r=e[1],o=t[0],i=t[1];return Math.abs(n-o)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))},n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0;var a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(){var e=new a.ARRAY_TYPE(2);return a.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function s(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function l(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function u(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function d(e){var t=e[0],n=e[1];return t*t+n*n}var f=u;n.len=f;var p=o;n.sub=p;var v=i;n.mul=v;var m=s;n.div=m;var h=c;n.dist=h;var y=l;n.sqrDist=y;var g=d;n.sqrLen=g;var x,b=(x=r(),function(e,t,n,r,o,i){var a,s;for(t=t||2,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)x[0]=e[a],x[1]=e[a+1],o(x,x,i),e[a]=x[0],e[a+1]=x[1];return e});n.forEach=b},{"./common.js":1}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(e){var t=new c.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},n.length=o,n.fromValues=i,n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},n.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},n.subtract=a,n.multiply=s,n.divide=l,n.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},n.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},n.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},n.distance=u,n.squaredDistance=d,n.squaredLength=f,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},n.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},n.normalize=p,n.dot=v,n.cross=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],c=n[2];return e[0]=o*c-i*s,e[1]=i*a-r*c,e[2]=r*s-o*a,e},n.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e},n.hermite=function(e,t,n,r,o,i){var a=i*i,s=a*(2*i-3)+1,c=a*(i-2)+i,l=a*(i-1),u=a*(3-2*i);return e[0]=t[0]*s+n[0]*c+r[0]*l+o[0]*u,e[1]=t[1]*s+n[1]*c+r[1]*l+o[1]*u,e[2]=t[2]*s+n[2]*c+r[2]*l+o[2]*u,e},n.bezier=function(e,t,n,r,o,i){var a=1-i,s=a*a,c=i*i,l=s*a,u=3*i*s,d=3*c*a,f=c*i;return e[0]=t[0]*l+n[0]*u+r[0]*d+o[0]*f,e[1]=t[1]*l+n[1]*u+r[1]*d+o[1]*f,e[2]=t[2]*l+n[2]*u+r[2]*d+o[2]*f,e},n.random=function(e,t){t=t||1;var n=2*c.RANDOM()*Math.PI,r=2*c.RANDOM()-1,o=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*o,e[1]=Math.sin(n)*o,e[2]=r*t,e},n.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e},n.transformMat3=function(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},n.transformQuat=function(e,t,n){var r=n[0],o=n[1],i=n[2],a=n[3],s=t[0],c=t[1],l=t[2],u=o*l-i*c,d=i*s-r*l,f=r*c-o*s,p=o*f-i*d,v=i*u-r*f,m=r*d-o*u,h=2*a;return u*=h,d*=h,f*=h,p*=2,v*=2,m*=2,e[0]=s+u+p,e[1]=c+d+v,e[2]=l+f+m,e},n.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},n.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},n.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},n.angle=function(e,t){var n=i(e[0],e[1],e[2]),r=i(t[0],t[1],t[2]);p(n,n),p(r,r);var o=v(n,r);return 1<o?0:o<-1?Math.PI:Math.acos(o)},n.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e},n.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],s=t[2];return Math.abs(n-i)<=c.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=c.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-s)<=c.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var c=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(){var e=new c.ARRAY_TYPE(3);return c.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function o(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function i(e,t,n){var r=new c.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function a(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function s(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function l(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function u(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.hypot(n,r,o)}function d(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o}function f(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function p(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return 0<i&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function v(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}var m=a;n.sub=m;var h=s;n.mul=h;var y=l;n.div=y;var g=u;n.dist=g;var x=d;n.sqrDist=x;var b=o;n.len=b;var M=f;n.sqrLen=M;var w,P=(w=r(),function(e,t,n,r,o,i){var a,s;for(t=t||3,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)w[0]=e[a],w[1]=e[a+1],w[2]=e[a+2],o(w,w,i),e[a]=w[0],e[a+1]=w[1],e[a+2]=w[2];return e});n.forEach=P},{"./common.js":1}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=r,n.clone=function(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},n.fromValues=function(e,t,n,r){var o=new u.ARRAY_TYPE(4);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o},n.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},n.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},n.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},n.subtract=o,n.multiply=i,n.divide=a,n.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},n.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},n.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},n.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},n.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},n.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},n.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},n.distance=s,n.squaredDistance=c,n.length=l,n.squaredLength=d,n.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},n.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},n.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;0<a&&(a=1/Math.sqrt(a));return e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a,e},n.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},n.cross=function(e,t,n,r){var o=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],c=n[1]*r[3]-n[3]*r[1],l=n[2]*r[3]-n[3]*r[2],u=t[0],d=t[1],f=t[2],p=t[3];return e[0]=d*l-f*c+p*s,e[1]=-u*l+f*a-p*i,e[2]=u*c-d*a+p*o,e[3]=-u*s+d*i-f*o,e},n.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e},n.random=function(e,t){var n,r,o,i,a,s;t=t||1;for(;n=2*u.RANDOM()-1,r=2*u.RANDOM()-1,a=n*n+r*r,1<=a;);for(;o=2*u.RANDOM()-1,i=2*u.RANDOM()-1,s=o*o+i*i,1<=s;);var c=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*o*c,e[3]=t*i*c,e},n.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},n.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],s=n[1],c=n[2],l=n[3],u=l*r+s*i-c*o,d=l*o+c*r-a*i,f=l*i+a*o-s*r,p=-a*r-s*o-c*i;return e[0]=u*l+p*-a+d*-c-f*-s,e[1]=d*l+p*-s+f*-a-u*-c,e[2]=f*l+p*-c+u*-s-d*-a,e[3]=t[3],e},n.zero=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},n.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},n.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},n.equals=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],s=t[1],c=t[2],l=t[3];return Math.abs(n-a)<=u.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=u.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(o-c)<=u.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-l)<=u.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))},n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}}(e("./common.js"));function r(){var e=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function o(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function i(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function a(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function s(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.hypot(n,r,o,i)}function c(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i}function l(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.hypot(t,n,r,o)}function d(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o}var f=o;n.sub=f;var p=i;n.mul=p;var v=a;n.div=v;var m=s;n.dist=m;var h=c;n.sqrDist=h;var y=l;n.len=y;var g=d;n.sqrLen=g;var x,b=(x=r(),function(e,t,n,r,o,i){var a,s;for(t=t||4,n=n||0,s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)x[0]=e[a],x[1]=e[a+1],x[2]=e[a+2],x[3]=e[a+3],o(x,x,i),e[a]=x[0],e[a+1]=x[1],e[a+2]=x[2],e[a+3]=x[3];return e});n.forEach=b},{"./common.js":1}],12:[function(d,t,r){(function(n){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:this).Matter=e()}}(function(){return function i(a,s,c){function l(t,e){if(!s[t]){if(!a[t]){var n="function"==typeof d&&d;if(!e&&n)return n(t,!0);if(u)return u(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=s[t]={exports:{}};a[t][0].call(o.exports,function(e){return l(a[t][1][e]||e)},o,o.exports,i,a,s,c)}return s[t].exports}for(var u="function"==typeof d&&d,e=0;e<c.length;e++)l(c[e]);return l}({1:[function(e,t,n){var l={};t.exports=l;var u=e("../geometry/Vertices"),d=e("../geometry/Vector"),o=e("../core/Sleeping"),i=(e("../render/Render"),e("../core/Common")),f=e("../geometry/Bounds"),p=e("../geometry/Axes");!function(){l._inertiaScale=4,l._nextCollidingGroupId=1,l._nextNonCollidingGroupId=-1,l._nextCategory=1,l.create=function(e){var t={id:i.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:u.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0},lineWidth:0}},n=i.extend(t,e);return r(n,e),n},l.nextGroup=function(e){return e?l._nextNonCollidingGroupId--:l._nextCollidingGroupId++},l.nextCategory=function(){return l._nextCategory=l._nextCategory<<1,l._nextCategory};var r=function(e,t){t=t||{},l.set(e,{bounds:e.bounds||f.create(e.vertices),positionPrev:e.positionPrev||d.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),u.rotate(e.vertices,e.angle,e.position),p.rotate(e.axes,e.angle),f.update(e.bounds,e.vertices,e.velocity),l.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var n=e.isStatic?"#2e2b44":i.choose(["#006BA6","#0496FF","#FFBC42","#D81159","#8F2D56"]);e.render.fillStyle=e.render.fillStyle||n,e.render.strokeStyle=e.render.strokeStyle||"#000",e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};l.set=function(e,t,n){var r;for(r in"string"==typeof t&&(r=t,(t={})[r]=n),t)if(n=t[r],t.hasOwnProperty(r))switch(r){case"isStatic":l.setStatic(e,n);break;case"isSleeping":o.set(e,n);break;case"mass":l.setMass(e,n);break;case"density":l.setDensity(e,n);break;case"inertia":l.setInertia(e,n);break;case"vertices":l.setVertices(e,n);break;case"position":l.setPosition(e,n);break;case"angle":l.setAngle(e,n);break;case"velocity":l.setVelocity(e,n);break;case"angularVelocity":l.setAngularVelocity(e,n);break;case"parts":l.setParts(e,n);break;default:e[r]=n}},l.setStatic=function(e,t){for(var n=0;n<e.parts.length;n++){var r=e.parts[n];(r.isStatic=t)?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,delete r._original)}},l.setMass=function(e,t){var n=e.inertia/(e.mass/6);e.inertia=t/6*n,e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},l.setDensity=function(e,t){l.setMass(e,t*e.area),e.density=t},l.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},l.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=u.create(t,e),e.axes=p.fromVertices(e.vertices),e.area=u.area(e.vertices),l.setMass(e,e.density*e.area);var n=u.centre(e.vertices);u.translate(e.vertices,n,-1),l.setInertia(e,l._inertiaScale*u.inertia(e.vertices,e.mass)),u.translate(e.vertices,e.position),f.update(e.bounds,e.vertices,e.velocity)},l.setParts=function(e,t,n){var r;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var o=t[r];o!==e&&(o.parent=e).parts.push(o)}if(1!==e.parts.length){if(n=void 0===n||n){var i=[];for(r=0;r<t.length;r++)i=i.concat(t[r].vertices);u.clockwiseSort(i);var a=u.hull(i),s=u.centre(a);l.setVertices(e,a),u.translate(e.vertices,s)}var c=l._totalProperties(e);e.area=c.area,(e.parent=e).position.x=c.centre.x,e.position.y=c.centre.y,e.positionPrev.x=c.centre.x,e.positionPrev.y=c.centre.y,l.setMass(e,c.mass),l.setInertia(e,c.inertia),l.setPosition(e,c.centre)}},l.setPosition=function(e,t){var n=d.sub(t,e.position);e.positionPrev.x+=n.x,e.positionPrev.y+=n.y;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.position.x+=n.x,o.position.y+=n.y,u.translate(o.vertices,n),f.update(o.bounds,o.vertices,e.velocity)}},l.setAngle=function(e,t){var n=t-e.angle;e.anglePrev+=n;for(var r=0;r<e.parts.length;r++){var o=e.parts[r];o.angle+=n,u.rotate(o.vertices,n,e.position),p.rotate(o.axes,n),f.update(o.bounds,o.vertices,e.velocity),0<r&&d.rotateAbout(o.position,n,e.position,o.position)}},l.setVelocity=function(e,t){e.positionPrev.x=e.position.x-t.x,e.positionPrev.y=e.position.y-t.y,e.velocity.x=t.x,e.velocity.y=t.y,e.speed=d.magnitude(e.velocity)},l.setAngularVelocity=function(e,t){e.anglePrev=e.angle-t,e.angularVelocity=t,e.angularSpeed=Math.abs(e.angularVelocity)},l.translate=function(e,t){l.setPosition(e,d.add(e.position,t))},l.rotate=function(e,t,n){if(n){var r=Math.cos(t),o=Math.sin(t),i=e.position.x-n.x,a=e.position.y-n.y;l.setPosition(e,{x:n.x+(i*r-a*o),y:n.y+(i*o+a*r)}),l.setAngle(e,e.angle+t)}else l.setAngle(e,e.angle+t)},l.scale=function(e,t,n,r){var o=0,i=0;r=r||e.position;for(var a=0;a<e.parts.length;a++){var s=e.parts[a];u.scale(s.vertices,t,n,r),s.axes=p.fromVertices(s.vertices),s.area=u.area(s.vertices),l.setMass(s,e.density*s.area),u.translate(s.vertices,{x:-s.position.x,y:-s.position.y}),l.setInertia(s,l._inertiaScale*u.inertia(s.vertices,s.mass)),u.translate(s.vertices,{x:s.position.x,y:s.position.y}),0<a&&(o+=s.area,i+=s.inertia),s.position.x=r.x+(s.position.x-r.x)*t,s.position.y=r.y+(s.position.y-r.y)*n,f.update(s.bounds,s.vertices,e.velocity)}1<e.parts.length&&(e.area=o,e.isStatic||(l.setMass(e,e.density*o),l.setInertia(e,i))),e.circleRadius&&(t===n?e.circleRadius*=t:e.circleRadius=null)},l.update=function(e,t,n,r){var o=Math.pow(t*n*e.timeScale,2),i=1-e.frictionAir*n*e.timeScale,a=e.position.x-e.positionPrev.x,s=e.position.y-e.positionPrev.y;e.velocity.x=a*i*r+e.force.x/e.mass*o,e.velocity.y=s*i*r+e.force.y/e.mass*o,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.angularVelocity=(e.angle-e.anglePrev)*i*r+e.torque/e.inertia*o,e.anglePrev=e.angle,e.angle+=e.angularVelocity,e.speed=d.magnitude(e.velocity),e.angularSpeed=Math.abs(e.angularVelocity);for(var c=0;c<e.parts.length;c++){var l=e.parts[c];u.translate(l.vertices,e.velocity),0<c&&(l.position.x+=e.velocity.x,l.position.y+=e.velocity.y),0!==e.angularVelocity&&(u.rotate(l.vertices,e.angularVelocity,e.position),p.rotate(l.axes,e.angularVelocity),0<c&&d.rotateAbout(l.position,e.angularVelocity,e.position,l.position)),f.update(l.bounds,l.vertices,e.velocity)}},l.applyForce=function(e,t,n){e.force.x+=n.x,e.force.y+=n.y;var r=t.x-e.position.x,o=t.y-e.position.y;e.torque+=r*n.y-o*n.x},l._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===e.parts.length?0:1;n<e.parts.length;n++){var r=e.parts[n],o=r.mass!==1/0?r.mass:1;t.mass+=o,t.area+=r.area,t.inertia+=r.inertia,t.centre=d.add(t.centre,d.mult(r.position,o))}return t.centre=d.div(t.centre,t.mass),t}}()},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31}],2:[function(e,t,n){var d={};t.exports=d;var a=e("../core/Events"),i=e("../core/Common"),s=e("../geometry/Bounds"),f=e("./Body");d.create=function(e){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},e)},d.setModified=function(e,t,n,r){if(e.isModified=t,n&&e.parent&&d.setModified(e.parent,t,n,r),r)for(var o=0;o<e.composites.length;o++){var i=e.composites[o];d.setModified(i,t,n,r)}},d.add=function(e,t){var n=[].concat(t);a.trigger(e,"beforeAdd",{object:t});for(var r=0;r<n.length;r++){var o=n[r];switch(o.type){case"body":if(o.parent!==o){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}d.addBody(e,o);break;case"constraint":d.addConstraint(e,o);break;case"composite":d.addComposite(e,o);break;case"mouseConstraint":d.addConstraint(e,o.constraint)}}return a.trigger(e,"afterAdd",{object:t}),e},d.remove=function(e,t,n){var r=[].concat(t);a.trigger(e,"beforeRemove",{object:t});for(var o=0;o<r.length;o++){var i=r[o];switch(i.type){case"body":d.removeBody(e,i,n);break;case"constraint":d.removeConstraint(e,i,n);break;case"composite":d.removeComposite(e,i,n);break;case"mouseConstraint":d.removeConstraint(e,i.constraint)}}return a.trigger(e,"afterRemove",{object:t}),e},d.addComposite=function(e,t){return e.composites.push(t),t.parent=e,d.setModified(e,!0,!0,!1),e},d.removeComposite=function(e,t,n){var r=i.indexOf(e.composites,t);if(-1!==r&&(d.removeCompositeAt(e,r),d.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)d.removeComposite(e.composites[o],t,!0);return e},d.removeCompositeAt=function(e,t){return e.composites.splice(t,1),d.setModified(e,!0,!0,!1),e},d.addBody=function(e,t){return e.bodies.push(t),d.setModified(e,!0,!0,!1),e},d.removeBody=function(e,t,n){var r=i.indexOf(e.bodies,t);if(-1!==r&&(d.removeBodyAt(e,r),d.setModified(e,!0,!0,!1)),n)for(var o=0;o<e.composites.length;o++)d.removeBody(e.composites[o],t,!0);return e},d.removeBodyAt=function(e,t){return e.bodies.splice(t,1),d.setModified(e,!0,!0,!1),e},d.addConstraint=function(e,t){return e.constraints.push(t),d.setModified(e,!0,!0,!1),e},d.removeConstraint=function(e,t,n){var r=i.indexOf(e.constraints,t);if(-1!==r&&d.removeConstraintAt(e,r),n)for(var o=0;o<e.composites.length;o++)d.removeConstraint(e.composites[o],t,!0);return e},d.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),d.setModified(e,!0,!0,!1),e},d.clear=function(e,t,n){if(n)for(var r=0;r<e.composites.length;r++)d.clear(e.composites[r],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,d.setModified(e,!0,!0,!1),e},d.allBodies=function(e){for(var t=[].concat(e.bodies),n=0;n<e.composites.length;n++)t=t.concat(d.allBodies(e.composites[n]));return t},d.allConstraints=function(e){for(var t=[].concat(e.constraints),n=0;n<e.composites.length;n++)t=t.concat(d.allConstraints(e.composites[n]));return t},d.allComposites=function(e){for(var t=[].concat(e.composites),n=0;n<e.composites.length;n++)t=t.concat(d.allComposites(e.composites[n]));return t},d.get=function(e,t,n){var r,o;switch(n){case"body":r=d.allBodies(e);break;case"constraint":r=d.allConstraints(e);break;case"composite":r=d.allComposites(e).concat(e)}return r?0===(o=r.filter(function(e){return e.id.toString()===t.toString()})).length?null:o[0]:null},d.move=function(e,t,n){return d.remove(e,t),d.add(n,t),e},d.rebase=function(e){for(var t=d.allBodies(e).concat(d.allConstraints(e)).concat(d.allComposites(e)),n=0;n<t.length;n++)t[n].id=i.nextId();return d.setModified(e,!0,!0,!1),e},d.translate=function(e,t,n){for(var r=n?d.allBodies(e):e.bodies,o=0;o<r.length;o++)f.translate(r[o],t);return d.setModified(e,!0,!0,!1),e},d.rotate=function(e,t,n,r){for(var o=Math.cos(t),i=Math.sin(t),a=r?d.allBodies(e):e.bodies,s=0;s<a.length;s++){var c=a[s],l=c.position.x-n.x,u=c.position.y-n.y;f.setPosition(c,{x:n.x+(l*o-u*i),y:n.y+(l*i+u*o)}),f.rotate(c,t)}return d.setModified(e,!0,!0,!1),e},d.scale=function(e,t,n,r,o){for(var i=o?d.allBodies(e):e.bodies,a=0;a<i.length;a++){var s=i[a],c=s.position.x-r.x,l=s.position.y-r.y;f.setPosition(s,{x:r.x+c*t,y:r.y+l*n}),f.scale(s,t,n)}return d.setModified(e,!0,!0,!1),e},d.bounds=function(e){for(var t=d.allBodies(e),n=[],r=0;r<t.length;r+=1){var o=t[r];n.push(o.bounds.min,o.bounds.max)}return s.create(n)}},{"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"./Body":1}],3:[function(e,t,n){var r={};t.exports=r;var o=e("./Composite"),i=(e("../constraint/Constraint"),e("../core/Common"));r.create=function(e){var t=o.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return i.extend(t,n,e)}},{"../constraint/Constraint":12,"../core/Common":14,"./Composite":2}],4:[function(e,t,n){var r={};(t.exports=r).create=function(e){return{id:r.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},r.id=function(e){return e.body.id+"_"+e.index}},{}],5:[function(e,t,n){var v={};t.exports=v;var m=e("./SAT"),h=e("./Pair"),y=e("../geometry/Bounds");v.collisions=function(e,t){for(var n=[],r=t.pairs.table,o=0;o<e.length;o++){var i=e[o][0],a=e[o][1];if((!i.isStatic&&!i.isSleeping||!a.isStatic&&!a.isSleeping)&&(v.canCollide(i.collisionFilter,a.collisionFilter)&&y.overlaps(i.bounds,a.bounds)))for(var s=1<i.parts.length?1:0;s<i.parts.length;s++)for(var c=i.parts[s],l=1<a.parts.length?1:0;l<a.parts.length;l++){var u=a.parts[l];if(c===i&&u===a||y.overlaps(c.bounds,u.bounds)){var d,f=r[h.id(c,u)];d=f&&f.isActive?f.collision:null;var p=m.collides(c,u,d);p.collided&&n.push(p)}}}return n},v.canCollide=function(e,t){return e.group===t.group&&0!==e.group?0<e.group:0!=(e.mask&t.category)&&0!=(t.mask&e.category)}},{"../geometry/Bounds":26,"./Pair":7,"./SAT":11}],6:[function(e,t,n){var y={};t.exports=y;var s=e("./Pair"),r=e("./Detector"),c=e("../core/Common");y.create=function(e){var t={controller:y,detector:r.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return c.extend(t,e)},y.update=function(e,t,n,r){var o,i,a,s,c,l=n.world,u=e.buckets,d=!1;for(o=0;o<t.length;o++){var f=t[o];if((!f.isSleeping||r)&&!(f.bounds.max.x<l.bounds.min.x||f.bounds.min.x>l.bounds.max.x||f.bounds.max.y<l.bounds.min.y||f.bounds.min.y>l.bounds.max.y)){var p=y._getRegion(e,f);if(!f.region||p.id!==f.region.id||r){f.region&&!r||(f.region=p);var v=y._regionUnion(p,f.region);for(i=v.startCol;i<=v.endCol;i++)for(a=v.startRow;a<=v.endRow;a++){s=u[c=y._getBucketId(i,a)];var m=i>=p.startCol&&i<=p.endCol&&a>=p.startRow&&a<=p.endRow,h=i>=f.region.startCol&&i<=f.region.endCol&&a>=f.region.startRow&&a<=f.region.endRow;!m&&h&&h&&s&&y._bucketRemoveBody(e,s,f),(f.region===p||m&&!h||r)&&(s=s||y._createBucket(u,c),y._bucketAddBody(e,s,f))}f.region=p,d=!0}}}d&&(e.pairsList=y._createActivePairsList(e))},y.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},y._regionUnion=function(e,t){var n=Math.min(e.startCol,t.startCol),r=Math.max(e.endCol,t.endCol),o=Math.min(e.startRow,t.startRow),i=Math.max(e.endRow,t.endRow);return y._createRegion(n,r,o,i)},y._getRegion=function(e,t){var n=t.bounds,r=Math.floor(n.min.x/e.bucketWidth),o=Math.floor(n.max.x/e.bucketWidth),i=Math.floor(n.min.y/e.bucketHeight),a=Math.floor(n.max.y/e.bucketHeight);return y._createRegion(r,o,i,a)},y._createRegion=function(e,t,n,r){return{id:e+","+t+","+n+","+r,startCol:e,endCol:t,startRow:n,endRow:r}},y._getBucketId=function(e,t){return"C"+e+"R"+t},y._createBucket=function(e,t){return e[t]=[]},y._bucketAddBody=function(e,t,n){for(var r=0;r<t.length;r++){var o=t[r];if(!(n.id===o.id||n.isStatic&&o.isStatic)){var i=s.id(n,o),a=e.pairs[i];a?a[2]+=1:e.pairs[i]=[n,o,1]}}t.push(n)},y._bucketRemoveBody=function(e,t,n){t.splice(c.indexOf(t,n),1);for(var r=0;r<t.length;r++){var o=t[r],i=s.id(n,o),a=e.pairs[i];a&&--a[2]}},y._createActivePairsList=function(e){var t,n,r=[];t=c.keys(e.pairs);for(var o=0;o<t.length;o++)0<(n=e.pairs[t[o]])[2]?r.push(n):delete e.pairs[t[o]];return r}},{"../core/Common":14,"./Detector":5,"./Pair":7}],7:[function(e,t,n){var f={};t.exports=f;var p=e("./Contact");f.create=function(e,t){var n=e.bodyA,r=e.bodyB,o=e.parentA,i=e.parentB,a={id:f.id(n,r),bodyA:n,bodyB:r,contacts:{},activeContacts:[],separation:0,isActive:!0,isSensor:n.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:o.inverseMass+i.inverseMass,friction:Math.min(o.friction,i.friction),frictionStatic:Math.max(o.frictionStatic,i.frictionStatic),restitution:Math.max(o.restitution,i.restitution),slop:Math.max(o.slop,i.slop)};return f.update(a,e,t),a},f.update=function(e,t,n){var r=e.contacts,o=t.supports,i=e.activeContacts,a=t.parentA,s=t.parentB;if(e.collision=t,e.inverseMass=a.inverseMass+s.inverseMass,e.friction=Math.min(a.friction,s.friction),e.frictionStatic=Math.max(a.frictionStatic,s.frictionStatic),e.restitution=Math.max(a.restitution,s.restitution),e.slop=Math.max(a.slop,s.slop),i.length=0,t.collided){for(var c=0;c<o.length;c++){var l=o[c],u=p.id(l),d=r[u];d?i.push(d):i.push(r[u]=p.create(l))}e.separation=t.depth,f.setActive(e,!0,n)}else!0===e.isActive&&f.setActive(e,!1,n)},f.setActive=function(e,t,n){t?(e.isActive=!0,e.timeUpdated=n):(e.isActive=!1,e.activeContacts.length=0)},f.id=function(e,t){return e.id<t.id?"A"+e.id+"B"+t.id:"A"+t.id+"B"+e.id}},{"./Contact":4}],8:[function(e,t,n){var l={};t.exports=l;var p=e("./Pair"),v=e("../core/Common");l._pairMaxIdleLife=1e3,l.create=function(e){return v.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},l.update=function(e,t,n){var r,o,i,a,s=e.list,c=e.table,l=e.collisionStart,u=e.collisionEnd,d=e.collisionActive,f=[];for(l.length=0,u.length=0,a=d.length=0;a<t.length;a++)(r=t[a]).collided&&(o=p.id(r.bodyA,r.bodyB),f.push(o),(i=c[o])?(i.isActive?d.push(i):l.push(i),p.update(i,r,n)):(i=p.create(r,n),c[o]=i,l.push(i),s.push(i)));for(a=0;a<s.length;a++)(i=s[a]).isActive&&-1===v.indexOf(f,i.id)&&(p.setActive(i,!1,n),u.push(i))},l.removeOld=function(e,t){var n,r,o,i,a=e.list,s=e.table,c=[];for(i=0;i<a.length;i++)(r=(n=a[i]).collision).bodyA.isSleeping||r.bodyB.isSleeping?n.timeUpdated=t:t-n.timeUpdated>l._pairMaxIdleLife&&c.push(i);for(i=0;i<c.length;i++)delete s[(n=a[o=c[i]-i]).id],a.splice(o,1)},l.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},{"../core/Common":14,"./Pair":7}],9:[function(e,t,n){var f={};t.exports=f;var p=e("../geometry/Vector"),c=e("./SAT"),l=e("../geometry/Bounds"),v=e("../factory/Bodies"),s=e("../geometry/Vertices");f.collides=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r];if(l.overlaps(o.bounds,e.bounds))for(var i=1===o.parts.length?0:1;i<o.parts.length;i++){var a=o.parts[i];if(l.overlaps(a.bounds,e.bounds)){var s=c.collides(a,e);if(s.collided){n.push(s);break}}}}return n},f.ray=function(e,t,n,r){r=r||1e-100;for(var o=p.angle(t,n),i=p.magnitude(p.sub(t,n)),a=.5*(n.x+t.x),s=.5*(n.y+t.y),c=v.rectangle(a,s,i,r,{angle:o}),l=f.collides(c,e),u=0;u<l.length;u+=1){var d=l[u];d.body=d.bodyB=d.bodyA}return l},f.region=function(e,t,n){for(var r=[],o=0;o<e.length;o++){var i=e[o],a=l.overlaps(i.bounds,t);(a&&!n||!a&&n)&&r.push(i)}return r},f.point=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r];if(l.contains(o.bounds,t))for(var i=1===o.parts.length?0:1;i<o.parts.length;i++){var a=o.parts[i];if(l.contains(a.bounds,t)&&s.contains(a.vertices,t)){n.push(o);break}}}return n}},{"../factory/Bodies":23,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29,"./SAT":11}],10:[function(e,t,n){var N={};t.exports=N;var i=e("../geometry/Vertices"),D=e("../geometry/Vector"),Y=e("../core/Common"),a=e("../geometry/Bounds");N._restingThresh=4,N._restingThreshTangent=6,N._positionDampen=.9,N._positionWarming=.8,N._frictionNormalMultiplier=5,N.preSolvePosition=function(e){var t,n,r;for(t=0;t<e.length;t++)(n=e[t]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},N.solvePosition=function(e,t){var n,r,o,i,a,s,c,l,u,d=D._temp[0],f=D._temp[1],p=D._temp[2],v=D._temp[3];for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(i=(o=r.collision).parentA,a=o.parentB,s=o.normal,c=D.sub(D.add(a.positionImpulse,a.position,d),D.add(i.positionImpulse,D.sub(a.position,o.penetration,f),p),v),r.separation=D.dot(s,c));for(n=0;n<e.length;n++)(r=e[n]).isActive&&!r.isSensor&&(i=(o=r.collision).parentA,a=o.parentB,s=o.normal,u=(r.separation-r.slop)*t,(i.isStatic||a.isStatic)&&(u*=2),i.isStatic||i.isSleeping||(l=N._positionDampen/i.totalContacts,i.positionImpulse.x+=s.x*u*l,i.positionImpulse.y+=s.y*u*l),a.isStatic||a.isSleeping||(l=N._positionDampen/a.totalContacts,a.positionImpulse.x-=s.x*u*l,a.positionImpulse.y-=s.y*u*l))},N.postSolvePosition=function(e){for(var t=0;t<e.length;t++){var n=e[t];if((n.totalContacts=0)!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var r=0;r<n.parts.length;r++){var o=n.parts[r];i.translate(o.vertices,n.positionImpulse),a.update(o.bounds,o.vertices,n.velocity),o.position.x+=n.positionImpulse.x,o.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,D.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=N._positionWarming,n.positionImpulse.y*=N._positionWarming)}}},N.preSolveVelocity=function(e){var t,n,r,o,i,a,s,c,l,u,d,f,p,v,m=D._temp[0],h=D._temp[1];for(t=0;t<e.length;t++)if((r=e[t]).isActive&&!r.isSensor)for(o=r.activeContacts,a=(i=r.collision).parentA,s=i.parentB,c=i.normal,l=i.tangent,n=0;n<o.length;n++)d=(u=o[n]).vertex,f=u.normalImpulse,p=u.tangentImpulse,0===f&&0===p||(m.x=c.x*f+l.x*p,m.y=c.y*f+l.y*p,a.isStatic||a.isSleeping||(v=D.sub(d,a.position,h),a.positionPrev.x+=m.x*a.inverseMass,a.positionPrev.y+=m.y*a.inverseMass,a.anglePrev+=D.cross(v,m)*a.inverseInertia),s.isStatic||s.isSleeping||(v=D.sub(d,s.position,h),s.positionPrev.x-=m.x*s.inverseMass,s.positionPrev.y-=m.y*s.inverseMass,s.anglePrev-=D.cross(v,m)*s.inverseInertia))},N.solveVelocity=function(e,t){for(var n=t*t,r=D._temp[0],o=D._temp[1],i=D._temp[2],a=D._temp[3],s=D._temp[4],c=D._temp[5],l=0;l<e.length;l++){var u=e[l];if(u.isActive&&!u.isSensor){var d=u.collision,f=d.parentA,p=d.parentB,v=d.normal,m=d.tangent,h=u.activeContacts,y=1/h.length;f.velocity.x=f.position.x-f.positionPrev.x,f.velocity.y=f.position.y-f.positionPrev.y,p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,f.angularVelocity=f.angle-f.anglePrev,p.angularVelocity=p.angle-p.anglePrev;for(var g=0;g<h.length;g++){var x=h[g],b=x.vertex,M=D.sub(b,f.position,o),w=D.sub(b,p.position,i),P=D.add(f.velocity,D.mult(D.perp(M),f.angularVelocity),a),S=D.add(p.velocity,D.mult(D.perp(w),p.angularVelocity),s),A=D.sub(P,S,c),C=D.dot(v,A),I=D.dot(m,A),O=Math.abs(I),_=Y.sign(I),R=(1+u.restitution)*C,B=Y.clamp(u.separation+C,0,1)*N._frictionNormalMultiplier,E=I,T=1/0;O>u.friction*u.frictionStatic*B*n&&(T=O,E=Y.clamp(u.friction*_*n,-T,T));var k=D.cross(M,v),L=D.cross(w,v),j=y/(f.inverseMass+p.inverseMass+f.inverseInertia*k*k+p.inverseInertia*L*L);if(R*=j,E*=j,C<0&&C*C>N._restingThresh*n)x.normalImpulse=0;else{var q=x.normalImpulse;x.normalImpulse=Math.min(x.normalImpulse+R,0),R=x.normalImpulse-q}if(I*I>N._restingThreshTangent*n)x.tangentImpulse=0;else{var V=x.tangentImpulse;x.tangentImpulse=Y.clamp(x.tangentImpulse+E,-T,T),E=x.tangentImpulse-V}r.x=v.x*R+m.x*E,r.y=v.y*R+m.y*E,f.isStatic||f.isSleeping||(f.positionPrev.x+=r.x*f.inverseMass,f.positionPrev.y+=r.y*f.inverseMass,f.anglePrev+=D.cross(M,r)*f.inverseInertia),p.isStatic||p.isSleeping||(p.positionPrev.x-=r.x*p.inverseMass,p.positionPrev.y-=r.y*p.inverseMass,p.anglePrev-=D.cross(w,r)*p.inverseInertia)}}}}},{"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],11:[function(e,t,n){var y={};t.exports=y;var g=e("../geometry/Vertices"),x=e("../geometry/Vector");y.collides=function(e,t,n){var r,o,i,a,s=!1;if(n){var c=e.parent,l=t.parent,u=c.speed*c.speed+c.angularSpeed*c.angularSpeed+l.speed*l.speed+l.angularSpeed*l.angularSpeed;s=n&&n.collided&&u<.2,a=n}else a={collided:!1,bodyA:e,bodyB:t};if(n&&s){var d=a.axisBody,f=d===e?t:e,p=[d.axes[n.axisNumber]];if(i=y._overlapAxes(d.vertices,f.vertices,p),a.reused=!0,i.overlap<=0)return a.collided=!1,a}else{if((r=y._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return a.collided=!1,a;if((o=y._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return a.collided=!1,a;r.overlap<o.overlap?(i=r,a.axisBody=e):(i=o,a.axisBody=t),a.axisNumber=i.axisNumber}a.bodyA=e.id<t.id?e:t,a.bodyB=e.id<t.id?t:e,a.collided=!0,a.depth=i.overlap,a.parentA=a.bodyA.parent,a.parentB=a.bodyB.parent,e=a.bodyA,t=a.bodyB,x.dot(i.axis,x.sub(t.position,e.position))<0?a.normal={x:i.axis.x,y:i.axis.y}:a.normal={x:-i.axis.x,y:-i.axis.y},a.tangent=x.perp(a.normal),a.penetration=a.penetration||{},a.penetration.x=a.normal.x*a.depth,a.penetration.y=a.normal.y*a.depth;var v=y._findSupports(e,t,a.normal),m=[];if(g.contains(e.vertices,v[0])&&m.push(v[0]),g.contains(e.vertices,v[1])&&m.push(v[1]),m.length<2){var h=y._findSupports(t,e,x.neg(a.normal));g.contains(t.vertices,h[0])&&m.push(h[0]),m.length<2&&g.contains(t.vertices,h[1])&&m.push(h[1])}return m.length<1&&(m=[v[0]]),a.supports=m,a},y._overlapAxes=function(e,t,n){for(var r,o,i=x._temp[0],a=x._temp[1],s={overlap:Number.MAX_VALUE},c=0;c<n.length;c++){if(o=n[c],y._projectToAxis(i,e,o),y._projectToAxis(a,t,o),(r=Math.min(i.max-a.min,a.max-i.min))<=0)return s.overlap=r,s;r<s.overlap&&(s.overlap=r,s.axis=o,s.axisNumber=c)}return s},y._projectToAxis=function(e,t,n){for(var r=x.dot(t[0],n),o=r,i=1;i<t.length;i+=1){var a=x.dot(t[i],n);o<a?o=a:a<r&&(r=a)}e.min=r,e.max=o},y._findSupports=function(e,t,n){for(var r,o,i,a,s=Number.MAX_VALUE,c=x._temp[0],l=t.vertices,u=e.position,d=0;d<l.length;d++)o=l[d],c.x=o.x-u.x,c.y=o.y-u.y,(r=-x.dot(n,c))<s&&(s=r,i=o);return o=l[0<=i.index-1?i.index-1:l.length-1],c.x=o.x-u.x,c.y=o.y-u.y,s=-x.dot(n,c),a=o,o=l[(i.index+1)%l.length],c.x=o.x-u.x,c.y=o.y-u.y,(r=-x.dot(n,c))<s&&(a=o),[i,a]}},{"../geometry/Vector":28,"../geometry/Vertices":29}],12:[function(e,t,n){var M={};t.exports=M;var a=e("../geometry/Vertices"),w=e("../geometry/Vector"),s=e("../core/Sleeping"),c=e("../geometry/Bounds"),l=e("../geometry/Axes"),u=e("../core/Common");M._warming=.4,M._torqueDampen=1,M._minLength=1e-6,M.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var n=t.bodyA?w.add(t.bodyA.position,t.pointA):t.pointA,r=t.bodyB?w.add(t.bodyB.position,t.pointB):t.pointB,o=w.magnitude(w.sub(n,r));t.length=void 0!==t.length?t.length:o,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(0<t.length?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var i={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&.1<t.stiffness?(i.type="pin",i.anchors=!1):t.stiffness<.9&&(i.type="spring"),t.render=u.extend(i,t.render),t},M.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var n=e[t],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},M.solveAll=function(e,t){for(var n=0;n<e.length;n+=1){var r=e[n],o=!r.bodyA||r.bodyA&&r.bodyA.isStatic,i=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(o||i)&&M.solve(e[n],t)}for(n=0;n<e.length;n+=1)o=!(r=e[n]).bodyA||r.bodyA&&r.bodyA.isStatic,i=!r.bodyB||r.bodyB&&r.bodyB.isStatic,o||i||M.solve(e[n],t)},M.solve=function(e,t){var n=e.bodyA,r=e.bodyB,o=e.pointA,i=e.pointB;if(n||r){n&&!n.isStatic&&(w.rotate(o,n.angle-e.angleA,o),e.angleA=n.angle),r&&!r.isStatic&&(w.rotate(i,r.angle-e.angleB,i),e.angleB=r.angle);var a=o,s=i;if(n&&(a=w.add(n.position,o)),r&&(s=w.add(r.position,i)),a&&s){var c=w.sub(a,s),l=w.magnitude(c);l<M._minLength&&(l=M._minLength);var u,d,f,p,v,m=(l-e.length)/l,h=e.stiffness<1?e.stiffness*t:e.stiffness,y=w.mult(c,m*h),g=(n?n.inverseMass:0)+(r?r.inverseMass:0),x=g+((n?n.inverseInertia:0)+(r?r.inverseInertia:0));if(e.damping){var b=w.create();f=w.div(c,l),v=w.sub(r&&w.sub(r.position,r.positionPrev)||b,n&&w.sub(n.position,n.positionPrev)||b),p=w.dot(f,v)}n&&!n.isStatic&&(d=n.inverseMass/g,n.constraintImpulse.x-=y.x*d,n.constraintImpulse.y-=y.y*d,n.position.x-=y.x*d,n.position.y-=y.y*d,e.damping&&(n.positionPrev.x-=e.damping*f.x*p*d,n.positionPrev.y-=e.damping*f.y*p*d),u=w.cross(o,y)/x*M._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle-=u,n.angle-=u),r&&!r.isStatic&&(d=r.inverseMass/g,r.constraintImpulse.x+=y.x*d,r.constraintImpulse.y+=y.y*d,r.position.x+=y.x*d,r.position.y+=y.y*d,e.damping&&(r.positionPrev.x+=e.damping*f.x*p*d,r.positionPrev.y+=e.damping*f.y*p*d),u=w.cross(i,y)/x*M._torqueDampen*r.inverseInertia*(1-e.angularStiffness),r.constraintImpulse.angle+=u,r.angle+=u)}}},M.postSolveAll=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.constraintImpulse;if(!(n.isStatic||0===r.x&&0===r.y&&0===r.angle)){s.set(n,!1);for(var o=0;o<n.parts.length;o++){var i=n.parts[o];a.translate(i.vertices,r),0<o&&(i.position.x+=r.x,i.position.y+=r.y),0!==r.angle&&(a.rotate(i.vertices,r.angle,n.position),l.rotate(i.axes,r.angle),0<o&&w.rotateAbout(i.position,r.angle,n.position,i.position)),c.update(i.bounds,i.vertices,n.velocity)}r.angle*=M._warming,r.x*=M._warming,r.y*=M._warming}}}},{"../core/Common":14,"../core/Sleeping":22,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],13:[function(e,t,n){var i={};t.exports=i;var c=e("../geometry/Vertices"),l=e("../core/Sleeping"),a=e("../core/Mouse"),u=e("../core/Events"),d=e("../collision/Detector"),s=e("./Constraint"),f=e("../body/Composite"),p=e("../core/Common"),v=e("../geometry/Bounds");i.create=function(t,e){var n=(t?t.mouse:null)||(e?e.mouse:null);n||(t&&t.render&&t.render.canvas?n=a.create(t.render.canvas):e&&e.element?n=a.create(e.element):(n=a.create(),p.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var r={type:"mouseConstraint",mouse:n,element:null,body:null,constraint:s.create({label:"Mouse Constraint",pointA:n.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},o=p.extend(r,e);return u.on(t,"beforeUpdate",function(){var e=f.allBodies(t.world);i.update(o,e),i._triggerEvents(o)}),o},i.update=function(e,t){var n=e.mouse,r=e.constraint,o=e.body;if(0===n.button){if(r.bodyB)l.set(r.bodyB,!1),r.pointA=n.position;else for(var i=0;i<t.length;i++)if(o=t[i],v.contains(o.bounds,n.position)&&d.canCollide(o.collisionFilter,e.collisionFilter))for(var a=1<o.parts.length?1:0;a<o.parts.length;a++){var s=o.parts[a];if(c.contains(s.vertices,n.position)){r.pointA=n.position,r.bodyB=e.body=o,r.pointB={x:n.position.x-o.position.x,y:n.position.y-o.position.y},r.angleB=o.angle,l.set(o,!1),u.trigger(e,"startdrag",{mouse:n,body:o});break}}}else r.bodyB=e.body=null,r.pointB=null,o&&u.trigger(e,"enddrag",{mouse:n,body:o})},i._triggerEvents=function(e){var t=e.mouse,n=t.sourceEvents;n.mousemove&&u.trigger(e,"mousemove",{mouse:t}),n.mousedown&&u.trigger(e,"mousedown",{mouse:t}),n.mouseup&&u.trigger(e,"mouseup",{mouse:t}),a.clearSourceEvents(t)}},{"../body/Composite":2,"../collision/Detector":5,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../core/Sleeping":22,"../geometry/Bounds":26,"../geometry/Vertices":29,"./Constraint":12}],14:[function(o,e,t){(function(r){var c={};e.exports=c,function(){c._nextId=0,c._seed=0,c._nowStartTime=+new Date,c.extend=function(e,t){var n,r;r="boolean"==typeof t?(n=2,t):(n=1,!0);for(var o=n;o<arguments.length;o++){var i=arguments[o];if(i)for(var a in i)r&&i[a]&&i[a].constructor===Object?e[a]&&e[a].constructor!==Object?e[a]=i[a]:(e[a]=e[a]||{},c.extend(e[a],r,i[a])):e[a]=i[a]}return e},c.clone=function(e,t){return c.extend({},t,e)},c.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)t.push(n);return t},c.values=function(e){var t=[];if(Object.keys){for(var n=Object.keys(e),r=0;r<n.length;r++)t.push(e[n[r]]);return t}for(var o in e)t.push(e[o]);return t},c.get=function(e,t,n,r){t=t.split(".").slice(n,r);for(var o=0;o<t.length;o+=1)e=e[t[o]];return e},c.set=function(e,t,n,r,o){var i=t.split(".").slice(r,o);return c.get(e,t,0,-1)[i[i.length-1]]=n},c.shuffle=function(e){for(var t=e.length-1;0<t;t--){var n=Math.floor(c.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},c.choose=function(e){return e[Math.floor(c.random()*e.length)]},c.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},c.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.isFunction=function(e){return"function"==typeof e},c.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},c.isString=function(e){return"[object String]"===toString.call(e)},c.clamp=function(e,t,n){return e<t?t:n<e?n:e},c.sign=function(e){return e<0?-1:1},c.now=function(){if(window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-c._nowStartTime},c.random=function(e,t){return t=void 0!==t?t:1,(e=void 0!==e?e:0)+n()*(t-e)};var n=function(){return c._seed=(9301*c._seed+49297)%233280,c._seed/233280};c.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},c.logLevel=1,c.log=function(){console&&0<c.logLevel&&c.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.info=function(){console&&0<c.logLevel&&c.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warn=function(){console&&0<c.logLevel&&c.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.nextId=function(){return c._nextId++},c.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c.map=function(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n},c.topologicalSort=function(e){var t=[],n=[],r=[];for(var o in e)n[o]||r[o]||c._topologicalSort(o,n,r,e,t);return t},c._topologicalSort=function(e,t,n,r,o){var i=r[e]||[];n[e]=!0;for(var a=0;a<i.length;a+=1){var s=i[a];n[s]||t[s]||c._topologicalSort(s,t,n,r,o)}n[e]=!1,t[e]=!0,o.push(e)},c.chain=function(){for(var i=[],e=0;e<arguments.length;e+=1){var t=arguments[e];t._chained?i.push.apply(i,t._chained):i.push(t)}function n(){for(var e,t=new Array(arguments.length),n=0,r=arguments.length;n<r;n++)t[n]=arguments[n];for(n=0;n<i.length;n+=1){var o=i[n].apply(e,t);void 0!==o&&(e=o)}return e}return n._chained=i,n},c.chainPathBefore=function(e,t,n){return c.set(e,t,c.chain(n,c.get(e,t)))},c.chainPathAfter=function(e,t,n){return c.set(e,t,c.chain(c.get(e,t),n))},c._requireGlobal=function(e,t){return("undefined"!=typeof window?window[e]:void 0!==r?r[e]:null)||o(t)}}()}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){var v={};t.exports=v;var i=e("../body/World"),m=e("./Sleeping"),h=e("../collision/Resolver"),a=e("../render/Render"),y=e("../collision/Pairs"),s=(e("./Metrics"),e("../collision/Grid")),g=e("./Events"),x=e("../body/Composite"),b=e("../constraint/Constraint"),c=e("./Common"),l=e("../body/Body");v.create=function(e,t){t=(t=c.isElement(e)?t:e)||{},((e=c.isElement(e)?e:null)||t.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:s}},r=c.extend(n,t);if(e||r.render){var o={element:e,controller:a};r.render=c.extend(o,r.render)}return r.render&&r.render.controller&&(r.render=r.render.controller.create(r.render)),r.render&&(r.render.engine=r),r.world=t.world||i.create(r.world),r.pairs=y.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r},v.update=function(e,t,n){t=t||1e3/60,n=n||1;var r,o=e.world,i=e.timing,a=e.broadphase,s=[];i.timestamp+=t*i.timeScale;var c={timestamp:i.timestamp};g.trigger(e,"beforeUpdate",c);var l=x.allBodies(o),u=x.allConstraints(o);for(e.enableSleeping&&m.update(l,i.timeScale),v._bodiesApplyGravity(l,o.gravity),v._bodiesUpdate(l,t,i.timeScale,n,o.bounds),b.preSolveAll(l),r=0;r<e.constraintIterations;r++)b.solveAll(u,i.timeScale);b.postSolveAll(l),s=a.controller?(o.isModified&&a.controller.clear(a),a.controller.update(a,l,e,o.isModified),a.pairsList):l,o.isModified&&x.setModified(o,!1,!1,!0);var d=a.detector(s,e),f=e.pairs,p=i.timestamp;for(y.update(f,d,p),y.removeOld(f,p),e.enableSleeping&&m.afterCollisions(f.list,i.timeScale),0<f.collisionStart.length&&g.trigger(e,"collisionStart",{pairs:f.collisionStart}),h.preSolvePosition(f.list),r=0;r<e.positionIterations;r++)h.solvePosition(f.list,i.timeScale);for(h.postSolvePosition(l),b.preSolveAll(l),r=0;r<e.constraintIterations;r++)b.solveAll(u,i.timeScale);for(b.postSolveAll(l),h.preSolveVelocity(f.list),r=0;r<e.velocityIterations;r++)h.solveVelocity(f.list,i.timeScale);return 0<f.collisionActive.length&&g.trigger(e,"collisionActive",{pairs:f.collisionActive}),0<f.collisionEnd.length&&g.trigger(e,"collisionEnd",{pairs:f.collisionEnd}),v._bodiesClearForces(l),g.trigger(e,"afterUpdate",c),e},v.merge=function(e,t){if(c.extend(e,t),t.world){e.world=t.world,v.clear(e);for(var n=x.allBodies(e.world),r=0;r<n.length;r++){var o=n[r];m.set(o,!1),o.id=c.nextId()}}},v.clear=function(e){var t=e.world;y.clear(e.pairs);var n=e.broadphase;if(n.controller){var r=x.allBodies(t);n.controller.clear(n),n.controller.update(n,r,e,!0)}},v._bodiesClearForces=function(e){for(var t=0;t<e.length;t++){var n=e[t];n.force.x=0,n.force.y=0,n.torque=0}},v._bodiesApplyGravity=function(e,t){var n=void 0!==t.scale?t.scale:.001;if((0!==t.x||0!==t.y)&&0!==n)for(var r=0;r<e.length;r++){var o=e[r];o.isStatic||o.isSleeping||(o.force.y+=o.mass*t.y*n,o.force.x+=o.mass*t.x*n)}},v._bodiesUpdate=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i];a.isStatic||a.isSleeping||l.update(a,t,n,r)}}},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Grid":6,"../collision/Pairs":8,"../collision/Resolver":10,"../constraint/Constraint":12,"../render/Render":31,"./Common":14,"./Events":16,"./Metrics":18,"./Sleeping":22}],16:[function(e,t,n){var r={};t.exports=r;var l=e("./Common");r.on=function(e,t,n){for(var r,o=t.split(" "),i=0;i<o.length;i++)r=o[i],e.events=e.events||{},e.events[r]=e.events[r]||[],e.events[r].push(n);return n},r.off=function(e,t,n){if(t){"function"==typeof t&&(n=t,t=l.keys(e.events).join(" "));for(var r=t.split(" "),o=0;o<r.length;o++){var i=e.events[r[o]],a=[];if(n&&i)for(var s=0;s<i.length;s++)i[s]!==n&&a.push(i[s]);e.events[r[o]]=a}}else e.events={}},r.trigger=function(e,t,n){var r,o,i,a;if(e.events){n=n||{},r=t.split(" ");for(var s=0;s<r.length;s++)if(o=r[s],i=e.events[o]){(a=l.clone(n,!1)).name=o,a.source=e;for(var c=0;c<i.length;c++)i[c].apply(e,[a])}}}},{"./Common":14}],17:[function(e,t,n){var r={};t.exports=r;var o=e("./Plugin"),i=e("./Common");r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){o.use(r,Array.prototype.slice.call(arguments))},r.before=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathBefore(r,e,t)},r.after=function(e,t){return e=e.replace(/^Matter./,""),i.chainPathAfter(r,e,t)}},{"./Common":14,"./Plugin":20}],18:[function(e,t,n){},{"../body/Composite":2,"./Common":14}],19:[function(e,t,n){var r={};t.exports=r;var o=e("../core/Common");r.create=function(e){var n={};return e||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=e||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=n.element.getAttribute("data-pixel-ratio")||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&(n.button=0,e.preventDefault()),n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=e},n.mousedown=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches?(n.button=0,e.preventDefault()):n.button=e.button,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=e},n.mouseup=function(e){var t=r._getRelativeMousePosition(e,n.element,n.pixelRatio);e.changedTouches&&e.preventDefault(),n.button=-1,n.absolute.x=t.x,n.absolute.y=t.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=e},n.mousewheel=function(e){n.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault()},r.setElement(n,n.element),n},r.setElement=function(e,t){(e.element=t).addEventListener("mousemove",e.mousemove),t.addEventListener("mousedown",e.mousedown),t.addEventListener("mouseup",e.mouseup),t.addEventListener("mousewheel",e.mousewheel),t.addEventListener("DOMMouseScroll",e.mousewheel),t.addEventListener("touchmove",e.mousemove),t.addEventListener("touchstart",e.mousedown),t.addEventListener("touchend",e.mouseup)},r.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},r.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},r._getRelativeMousePosition=function(e,t,n){var r,o,i=t.getBoundingClientRect(),a=document.documentElement||document.body.parentNode||document.body,s=void 0!==window.pageXOffset?window.pageXOffset:a.scrollLeft,c=void 0!==window.pageYOffset?window.pageYOffset:a.scrollTop,l=e.changedTouches;return o=l?(r=l[0].pageX-i.left-s,l[0].pageY-i.top-c):(r=e.pageX-i.left-s,e.pageY-i.top-c),{x:r/(t.clientWidth/(t.width||t.clientWidth)*n),y:o/(t.clientHeight/(t.height||t.clientHeight)*n)}}},{"../core/Common":14}],20:[function(e,t,n){var s={};t.exports=s;var c=e("./Common");s._registry={},s.register=function(e){if(s.isPlugin(e)||c.warn("Plugin.register:",s.toString(e),"does not implement all required fields."),e.name in s._registry){var t=s._registry[e.name],n=s.versionParse(e.version).number,r=s.versionParse(t.version).number;r<n?(c.warn("Plugin.register:",s.toString(t),"was upgraded to",s.toString(e)),s._registry[e.name]=e):n<r?c.warn("Plugin.register:",s.toString(t),"can not be downgraded to",s.toString(e)):e!==t&&c.warn("Plugin.register:",s.toString(e),"is already registered to different plugin object")}else s._registry[e.name]=e;return e},s.resolve=function(e){return s._registry[s.dependencyParse(e).name]},s.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},s.isPlugin=function(e){return e&&e.name&&e.version&&e.install},s.isUsed=function(e,t){return-1<e.used.indexOf(t)},s.isFor=function(e,t){var n=e.for&&s.dependencyParse(e.for);return!e.for||t.name===n.name&&s.versionSatisfies(t.version,n.range)},s.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var n=s.dependencies(e),r=c.topologicalSort(n),o=[],i=0;i<r.length;i+=1)if(r[i]!==e.name){var a=s.resolve(r[i]);a?s.isUsed(e,a.name)||(s.isFor(a,e)||(c.warn("Plugin.use:",s.toString(a),"is for",a.for,"but installed on",s.toString(e)+"."),a._warned=!0),a.install?a.install(e):(c.warn("Plugin.use:",s.toString(a),"does not specify an install function."),a._warned=!0),a._warned?(o.push(" "+s.toString(a)),delete a._warned):o.push(" "+s.toString(a)),e.used.push(a.name)):o.push(" "+r[i])}0<o.length&&c.info(o.join("  "))}else c.warn("Plugin.use:",s.toString(e),"does not specify any dependencies to install.")},s.dependencies=function(r,e){var o=s.dependencyParse(r),t=o.name;if(!(t in(e=e||{}))){r=s.resolve(r)||r,e[t]=c.map(r.uses||[],function(e){s.isPlugin(e)&&s.register(e);var t=s.dependencyParse(e),n=s.resolve(e);return n&&!s.versionSatisfies(n.version,t.range)?(c.warn("Plugin.dependencies:",s.toString(n),"does not satisfy",s.toString(t),"used by",s.toString(o)+"."),n._warned=!0,r._warned=!0):n||(c.warn("Plugin.dependencies:",s.toString(e),"used by",s.toString(o),"could not be resolved."),r._warned=!0),t.name});for(var n=0;n<e[t].length;n+=1)s.dependencies(e[t][n],e);return e}},s.dependencyParse=function(e){if(c.isString(e)){return/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(e)||c.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}}return{name:e.name,range:e.range||e.version}},s.versionParse=function(e){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(e)||c.warn("Plugin.versionParse:",e,"is not a valid version or range.");var t=e.split("-");e=t[0];var n=isNaN(Number(e[0])),r=n?e.substr(1):e,o=c.map(r.split("."),function(e){return Number(e)});return{isRange:n,version:r,range:e,operator:n?e[0]:"",parts:o,prerelease:t[1],number:1e8*o[0]+1e4*o[1]+o[2]}},s.versionSatisfies=function(e,t){t=t||"*";var n=s.versionParse(t),r=n.parts,o=s.versionParse(e),i=o.parts;if(n.isRange){if("*"===n.operator||"*"===e)return!0;if("~"===n.operator)return i[0]===r[0]&&i[1]===r[1]&&i[2]>=r[2];if("^"===n.operator)return 0<r[0]?i[0]===r[0]&&o.number>=n.number:0<r[1]?i[1]===r[1]&&i[2]>=r[2]:i[2]===r[2]}return e===t||"*"===e}},{"./Common":14}],21:[function(e,t,n){var i={};t.exports=i;var s=e("./Events"),c=e("./Engine"),r=e("./Common");!function(){var o,t,n;"undefined"!=typeof window&&(o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),o||(o=function(e){n=setTimeout(function(){e(r.now())},1e3/60)},t=function(){clearTimeout(n)});i.create=function(e){var t=r.extend({fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},e);return t.delta=t.delta||1e3/t.fps,t.deltaMin=t.deltaMin||1e3/t.fps,t.deltaMax=t.deltaMax||1e3/(.5*t.fps),t.fps=1e3/t.delta,t},i.run=function(n,r){return void 0!==n.positionIterations&&(r=n,n=i.create()),function e(t){n.frameRequestId=o(e),t&&n.enabled&&i.tick(n,r,t)}(),n},i.tick=function(e,t,n){var r,o=t.timing,i=1,a={timestamp:o.timestamp};s.trigger(e,"beforeTick",a),s.trigger(t,"beforeTick",a),e.isFixed?r=e.delta:(r=n-e.timePrev||e.delta,e.timePrev=n,e.deltaHistory.push(r),e.deltaHistory=e.deltaHistory.slice(-e.deltaSampleSize),i=(r=(r=(r=Math.min.apply(null,e.deltaHistory))<e.deltaMin?e.deltaMin:r)>e.deltaMax?e.deltaMax:r)/e.delta,e.delta=r),0!==e.timeScalePrev&&(i*=o.timeScale/e.timeScalePrev),0===o.timeScale&&(i=0),e.timeScalePrev=o.timeScale,e.correction=i,e.frameCounter+=1,1e3<=n-e.counterTimestamp&&(e.fps=e.frameCounter*((n-e.counterTimestamp)/1e3),e.counterTimestamp=n,e.frameCounter=0),s.trigger(e,"tick",a),s.trigger(t,"tick",a),t.world.isModified&&t.render&&t.render.controller&&t.render.controller.clear&&t.render.controller.clear(t.render),s.trigger(e,"beforeUpdate",a),c.update(t,r,i),s.trigger(e,"afterUpdate",a),t.render&&t.render.controller&&(s.trigger(e,"beforeRender",a),s.trigger(t,"beforeRender",a),t.render.controller.world(t.render),s.trigger(e,"afterRender",a),s.trigger(t,"afterRender",a)),s.trigger(e,"afterTick",a),s.trigger(t,"afterTick",a)},i.stop=function(e){t(e.frameRequestId)},i.start=function(e,t){i.run(e,t)}}()},{"./Common":14,"./Engine":15,"./Events":16}],22:[function(e,t,n){var u={};t.exports=u;var r=e("./Events");u._motionWakeThreshold=.18,u._motionSleepThreshold=.08,u._minBias=.9,u.update=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var o=e[r],i=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var a=Math.min(o.motion,i),s=Math.max(o.motion,i);o.motion=u._minBias*a+(1-u._minBias)*s,0<o.sleepThreshold&&o.motion<u._motionSleepThreshold*n?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&u.set(o,!0)):0<o.sleepCounter&&--o.sleepCounter}else u.set(o,!1)}},u.afterCollisions=function(e,t){for(var n=t*t*t,r=0;r<e.length;r++){var o=e[r];if(o.isActive){var i=o.collision,a=i.bodyA.parent,s=i.bodyB.parent;if(!(a.isSleeping&&s.isSleeping||a.isStatic||s.isStatic)&&(a.isSleeping||s.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:s,l=c===a?s:a;!c.isStatic&&l.motion>u._motionWakeThreshold*n&&u.set(c,!1)}}}},u.set=function(e,t){var n=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,n||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,n&&r.trigger(e,"sleepEnd"))}},{"./Events":16}],23:[function(e,t,n){var v={};t.exports=v;var A,C=e("../geometry/Vertices"),I=e("../core/Common"),O=e("../body/Body"),_=e("../geometry/Bounds"),R=e("../geometry/Vector");v.rectangle=function(e,t,n,r,o){o=o||{};var i={label:"Rectangle Body",position:{x:e,y:t},vertices:C.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(o.chamfer){var a=o.chamfer;i.vertices=C.chamfer(i.vertices,a.radius,a.quality,a.qualityMin,a.qualityMax),delete o.chamfer}return O.create(I.extend({},i,o))},v.trapezoid=function(e,t,n,r,o,i){i=i||{};var a,s=n*(o*=.5),c=s+(1-2*o)*n,l=c+s;a=o<.5?"L 0 0 L "+s+" "+-r+" L "+c+" "+-r+" L "+l+" 0":"L 0 0 L "+c+" "+-r+" L "+l+" 0";var u={label:"Trapezoid Body",position:{x:e,y:t},vertices:C.fromPath(a)};if(i.chamfer){var d=i.chamfer;u.vertices=C.chamfer(u.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete i.chamfer}return O.create(I.extend({},u,i))},v.circle=function(e,t,n,r,o){r=r||{};var i={label:"Circle Body",circleRadius:n};o=o||25;var a=Math.ceil(Math.max(10,Math.min(o,n)));return a%2==1&&(a+=1),v.polygon(e,t,a,n,I.extend({},i,r))},v.polygon=function(e,t,n,r,o){if(o=o||{},n<3)return v.circle(e,t,r,o);for(var i=2*Math.PI/n,a="",s=.5*i,c=0;c<n;c+=1){var l=s+c*i,u=Math.cos(l)*r,d=Math.sin(l)*r;a+="L "+u.toFixed(3)+" "+d.toFixed(3)+" "}var f={label:"Polygon Body",position:{x:e,y:t},vertices:C.fromPath(a)};if(o.chamfer){var p=o.chamfer;f.vertices=C.chamfer(f.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete o.chamfer}return O.create(I.extend({},f,o))},v.fromVertices=function(e,t,n,r,o,i,a){var s,c,l,u,d,f,p,v,m;for(r=r||{},c=[],o=void 0!==o&&o,i=void 0!==i?i:.01,a=void 0!==a?a:10,(A=A||I._requireGlobal("decomp","poly-decomp"))||I.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),I.isArray(n[0])||(n=[n]),v=0;v<n.length;v+=1)if(u=n[v],(l=C.isConvex(u))||!A)u=l?C.clockwiseSort(u):C.hull(u),c.push({position:{x:e,y:t},vertices:u});else{var h=u.map(function(e){return[e.x,e.y]});A.makeCCW(h),!1!==i&&A.removeCollinearPoints(h,i);var y=A.quickDecomp(h);for(d=0;d<y.length;d++){var g=y[d].map(function(e){return{x:e[0],y:e[1]}});0<a&&C.area(g)<a||c.push({position:C.centre(g),vertices:g})}}for(d=0;d<c.length;d++)c[d]=O.create(I.extend(c[d],r));if(o){for(d=0;d<c.length;d++){var x=c[d];for(f=d+1;f<c.length;f++){var b=c[f];if(_.overlaps(x.bounds,b.bounds)){var M=x.vertices,w=b.vertices;for(p=0;p<x.vertices.length;p++)for(m=0;m<b.vertices.length;m++){var P=R.magnitudeSquared(R.sub(M[(p+1)%M.length],w[m])),S=R.magnitudeSquared(R.sub(M[p],w[(m+1)%w.length]));P<5&&S<5&&(M[p].isInternal=!0,w[m].isInternal=!0)}}}}}return 1<c.length?(s=O.create(I.extend({parts:c.slice(0)},r)),O.setPosition(s,{x:e,y:t}),s):c[0]}},{"../body/Body":1,"../core/Common":14,"../geometry/Bounds":26,"../geometry/Vector":28,"../geometry/Vertices":29}],24:[function(e,t,n){var p={};t.exports=p;var g=e("../body/Composite"),m=e("../constraint/Constraint"),h=e("../core/Common"),x=e("../body/Body"),v=e("./Bodies");p.stack=function(e,t,n,r,o,i,a){for(var s,c=g.create({label:"Stack"}),l=e,u=t,d=0,f=0;f<r;f++){for(var p=0,v=0;v<n;v++){var m=a(l,u,v,f,s,d);if(m){var h=m.bounds.max.y-m.bounds.min.y,y=m.bounds.max.x-m.bounds.min.x;p<h&&(p=h),x.translate(m,{x:.5*y,y:.5*h}),l=m.bounds.max.x+o,g.addBody(c,m),s=m,d+=1}else l+=o}u+=p+i,l=e}return c},p.chain=function(e,t,n,r,o,i){for(var a=e.bodies,s=1;s<a.length;s++){var c=a[s-1],l=a[s],u=c.bounds.max.y-c.bounds.min.y,d=c.bounds.max.x-c.bounds.min.x,f=l.bounds.max.y-l.bounds.min.y,p={bodyA:c,pointA:{x:d*t,y:u*n},bodyB:l,pointB:{x:(l.bounds.max.x-l.bounds.min.x)*r,y:f*o}},v=h.extend(p,i);g.addConstraint(e,m.create(v))}return e.label+=" Chain",e},p.mesh=function(e,t,n,r,o){var i,a,s,c,l,u=e.bodies;for(i=0;i<n;i++){for(a=1;a<t;a++)s=u[a-1+i*t],c=u[a+i*t],g.addConstraint(e,m.create(h.extend({bodyA:s,bodyB:c},o)));if(0<i)for(a=0;a<t;a++)s=u[a+(i-1)*t],c=u[a+i*t],g.addConstraint(e,m.create(h.extend({bodyA:s,bodyB:c},o))),r&&0<a&&(l=u[a-1+(i-1)*t],g.addConstraint(e,m.create(h.extend({bodyA:l,bodyB:c},o)))),r&&a<t-1&&(l=u[a+1+(i-1)*t],g.addConstraint(e,m.create(h.extend({bodyA:l,bodyB:c},o))))}return e.label+=" Mesh",e},p.pyramid=function(c,e,l,u,d,t,f){return p.stack(c,e,l,u,d,t,function(e,t,n,r,o,i){var a=Math.min(u,Math.ceil(l/2)),s=o?o.bounds.max.x-o.bounds.min.x:0;if(!(a<r)&&!(n<(r=a-r)||l-1-r<n))return 1===i&&x.translate(o,{x:(n+(l%2==1?1:-1))*s,y:0}),f(c+(o?n*s:0)+n*d,t,n,r,o,i)})},p.newtonsCradle=function(e,t,n,r,o){for(var i=g.create({label:"Newtons Cradle"}),a=0;a<n;a++){var s=v.circle(e+a*(1.9*r),t+o,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),c=m.create({pointA:{x:e+a*(1.9*r),y:t},bodyB:s});g.addBody(i,s),g.addConstraint(i,c)}return i},p.car=function(e,t,n,r,o){var i=x.nextGroup(!0),a=.5*-n+20,s=.5*n-20,c=g.create({label:"Car"}),l=v.rectangle(e,t,n,r,{collisionFilter:{group:i},chamfer:{radius:.5*r},density:2e-4}),u=v.circle(e+a,t+0,o,{collisionFilter:{group:i},friction:.8}),d=v.circle(e+s,t+0,o,{collisionFilter:{group:i},friction:.8}),f=m.create({bodyB:l,pointB:{x:a,y:0},bodyA:u,stiffness:1,length:0}),p=m.create({bodyB:l,pointB:{x:s,y:0},bodyA:d,stiffness:1,length:0});return g.addBody(c,l),g.addBody(c,u),g.addBody(c,d),g.addConstraint(c,f),g.addConstraint(c,p),c},p.softBody=function(e,t,n,r,o,i,a,s,c,l){c=h.extend({inertia:1/0},c),l=h.extend({stiffness:.2,render:{type:"line",anchors:!1}},l);var u=p.stack(e,t,n,r,o,i,function(e,t){return v.circle(e,t,s,c)});return p.mesh(u,n,r,a,l),u.label="Soft Body",u}},{"../body/Body":1,"../body/Composite":2,"../constraint/Constraint":12,"../core/Common":14,"./Bodies":23}],25:[function(e,t,n){var r={};t.exports=r;var a=e("../geometry/Vector"),s=e("../core/Common");r.fromVertices=function(e){for(var t={},n=0;n<e.length;n++){var r=(n+1)%e.length,o=a.normalise({x:e[r].y-e[n].y,y:e[n].x-e[r].x}),i=0===o.y?1/0:o.x/o.y;t[i=i.toFixed(3).toString()]=o}return s.values(t)},r.rotate=function(e,t){if(0!==t)for(var n=Math.cos(t),r=Math.sin(t),o=0;o<e.length;o++){var i,a=e[o];i=a.x*n-a.y*r,a.y=a.x*r+a.y*n,a.x=i}}},{"../core/Common":14,"../geometry/Vector":28}],26:[function(e,t,n){var r={};(t.exports=r).create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&r.update(t,e),t},r.update=function(e,t,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<t.length;r++){var o=t[r];o.x>e.max.x&&(e.max.x=o.x),o.x<e.min.x&&(e.min.x=o.x),o.y>e.max.y&&(e.max.y=o.y),o.y<e.min.y&&(e.min.y=o.y)}n&&(0<n.x?e.max.x+=n.x:e.min.x+=n.x,0<n.y?e.max.y+=n.y:e.min.y+=n.y)},r.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},r.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},r.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},r.shift=function(e,t){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+n,e.min.y=t.y,e.max.y=t.y+r}},{}],27:[function(e,t,n){var x={};t.exports=x;e("../geometry/Bounds");var b=e("../core/Common");x.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||b.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,r,o,i,a,s,c,l,u,d,f,p=[],v=0,m=0,h=0;t=t||15;function y(e,t,n){var r=n%2==1&&1<n;if(!u||e!=u.x||t!=u.y){f=u&&r?(d=u.x,u.y):d=0;var o={x:d+e,y:f+t};!r&&u||(u=o),p.push(o),m=d+e,h=f+t}}function g(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":m=e.x,h=e.y;break;case"H":m=e.x;break;case"V":h=e.y}y(m,h,e.pathSegType)}}for(x._svgPathToAbsolute(e),o=e.getTotalLength(),s=[],n=0;n<e.pathSegList.numberOfItems;n+=1)s.push(e.pathSegList.getItem(n));for(c=s.concat();v<o;){if((a=s[e.getPathSegAtLength(v)])!=l){for(;c.length&&c[0]!=a;)g(c.shift());l=a}switch(a.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":i=e.getPointAtLength(v),y(i.x,i.y,0)}v+=t}for(n=0,r=c.length;n<r;++n)g(c[n]);return p},x._svgPathToAbsolute=function(e){for(var t,n,r,o,i,a,s=e.pathSegList,c=0,l=0,u=s.numberOfItems,d=0;d<u;++d){var f=s.getItem(d),p=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in f&&(c=f.x),"y"in f&&(l=f.y);else switch("x1"in f&&(r=c+f.x1),"x2"in f&&(i=c+f.x2),"y1"in f&&(o=l+f.y1),"y2"in f&&(a=l+f.y2),"x"in f&&(c+=f.x),"y"in f&&(l+=f.y),p){case"m":s.replaceItem(e.createSVGPathSegMovetoAbs(c,l),d);break;case"l":s.replaceItem(e.createSVGPathSegLinetoAbs(c,l),d);break;case"h":s.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(c),d);break;case"v":s.replaceItem(e.createSVGPathSegLinetoVerticalAbs(l),d);break;case"c":s.replaceItem(e.createSVGPathSegCurvetoCubicAbs(c,l,r,o,i,a),d);break;case"s":s.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(c,l,i,a),d);break;case"q":s.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(c,l,r,o),d);break;case"t":s.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(c,l),d);break;case"a":s.replaceItem(e.createSVGPathSegArcAbs(c,l,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),d);break;case"z":case"Z":c=t,l=n}"M"!=p&&"m"!=p||(t=c,n=l)}}},{"../core/Common":14,"../geometry/Bounds":26}],28:[function(e,t,n){var r={};(t.exports=r).create=function(e,t){return{x:e||0,y:t||0}},r.clone=function(e){return{x:e.x,y:e.y}},r.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},r.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},r.rotate=function(e,t,n){var r=Math.cos(t),o=Math.sin(t);n=n||{};var i=e.x*r-e.y*o;return n.y=e.x*o+e.y*r,n.x=i,n},r.rotateAbout=function(e,t,n,r){var o=Math.cos(t),i=Math.sin(t);r=r||{};var a=n.x+((e.x-n.x)*o-(e.y-n.y)*i);return r.y=n.y+((e.x-n.x)*i+(e.y-n.y)*o),r.x=a,r},r.normalise=function(e){var t=r.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},r.dot=function(e,t){return e.x*t.x+e.y*t.y},r.cross=function(e,t){return e.x*t.y-e.y*t.x},r.cross3=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)},r.add=function(e,t,n){return(n=n||{}).x=e.x+t.x,n.y=e.y+t.y,n},r.sub=function(e,t,n){return(n=n||{}).x=e.x-t.x,n.y=e.y-t.y,n},r.mult=function(e,t){return{x:e.x*t,y:e.y*t}},r.div=function(e,t){return{x:e.x/t,y:e.y/t}},r.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},r.neg=function(e){return{x:-e.x,y:-e.y}},r.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]},{}],29:[function(e,t,n){var s={};t.exports=s;var b=e("../geometry/Vector"),M=e("../core/Common");s.create=function(e,t){for(var n=[],r=0;r<e.length;r++){var o=e[r],i={x:o.x,y:o.y,index:r,body:t,isInternal:!1};n.push(i)}return n},s.fromPath=function(e,t){var r=[];return e.replace(/L?\s*([\-\d\.e]+)[\s,]*([\-\d\.e]+)*/gi,function(e,t,n){r.push({x:parseFloat(t),y:parseFloat(n)})}),s.create(r,t)},s.centre=function(e){for(var t,n,r,o=s.area(e,!0),i={x:0,y:0},a=0;a<e.length;a++)r=(a+1)%e.length,t=b.cross(e[a],e[r]),n=b.mult(b.add(e[a],e[r]),t),i=b.add(i,n);return b.div(i,6*o)},s.mean=function(e){for(var t={x:0,y:0},n=0;n<e.length;n++)t.x+=e[n].x,t.y+=e[n].y;return b.div(t,e.length)},s.area=function(e,t){for(var n=0,r=e.length-1,o=0;o<e.length;o++)n+=(e[r].x-e[o].x)*(e[r].y+e[o].y),r=o;return t?n/2:Math.abs(n)/2},s.inertia=function(e,t){for(var n,r,o=0,i=0,a=e,s=0;s<a.length;s++)r=(s+1)%a.length,o+=(n=Math.abs(b.cross(a[r],a[s])))*(b.dot(a[r],a[r])+b.dot(a[r],a[s])+b.dot(a[s],a[s])),i+=n;return t/6*(o/i)},s.translate=function(e,t,n){var r;if(n)for(r=0;r<e.length;r++)e[r].x+=t.x*n,e[r].y+=t.y*n;else for(r=0;r<e.length;r++)e[r].x+=t.x,e[r].y+=t.y;return e},s.rotate=function(e,t,n){if(0!==t){for(var r=Math.cos(t),o=Math.sin(t),i=0;i<e.length;i++){var a=e[i],s=a.x-n.x,c=a.y-n.y;a.x=n.x+(s*r-c*o),a.y=n.y+(s*o+c*r)}return e}},s.contains=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],o=e[(n+1)%e.length];if(0<(t.x-r.x)*(o.y-r.y)+(t.y-r.y)*(r.x-o.x))return!1}return!0},s.scale=function(e,t,n,r){if(1===t&&1===n)return e;var o,i;r=r||s.centre(e);for(var a=0;a<e.length;a++)o=e[a],i=b.sub(o,r),e[a].x=r.x+i.x*t,e[a].y=r.y+i.y*n;return e},s.chamfer=function(e,t,n,r,o){t="number"==typeof t?[t]:t||[8],n=void 0!==n?n:-1,r=r||2,o=o||14;for(var i=[],a=0;a<e.length;a++){var s=e[0<=a-1?a-1:e.length-1],c=e[a],l=e[(a+1)%e.length],u=t[a<t.length?a:t.length-1];if(0!==u){var d=b.normalise({x:c.y-s.y,y:s.x-c.x}),f=b.normalise({x:l.y-c.y,y:c.x-l.x}),p=Math.sqrt(2*Math.pow(u,2)),v=b.mult(M.clone(d),u),m=b.normalise(b.mult(b.add(d,f),.5)),h=b.sub(c,b.mult(m,p)),y=n;-1===n&&(y=1.75*Math.pow(u,.32)),(y=M.clamp(y,r,o))%2==1&&(y+=1);for(var g=Math.acos(b.dot(d,f))/y,x=0;x<y;x++)i.push(b.add(b.rotate(v,g*x),h))}else i.push(c)}return i},s.clockwiseSort=function(e){var n=s.mean(e);return e.sort(function(e,t){return b.angle(n,e)-b.angle(n,t)}),e},s.isConvex=function(e){var t,n,r,o,i=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(r=(t+2)%a,o=(e[n=(t+1)%a].x-e[t].x)*(e[r].y-e[n].y),(o-=(e[n].y-e[t].y)*(e[r].x-e[n].x))<0?i|=1:0<o&&(i|=2),3===i)return!1;return 0!==i||null},s.hull=function(e){var t,n,r=[],o=[];for((e=e.slice(0)).sort(function(e,t){var n=e.x-t.x;return 0!=n?n:e.y-t.y}),n=0;n<e.length;n+=1){for(t=e[n];2<=o.length&&b.cross3(o[o.length-2],o[o.length-1],t)<=0;)o.pop();o.push(t)}for(n=e.length-1;0<=n;--n){for(t=e[n];2<=r.length&&b.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}return r.pop(),o.pop(),r.concat(o)}},{"../core/Common":14,"../geometry/Vector":28}],30:[function(e,t,n){var r=t.exports=e("../core/Matter");r.Body=e("../body/Body"),r.Composite=e("../body/Composite"),r.World=e("../body/World"),r.Contact=e("../collision/Contact"),r.Detector=e("../collision/Detector"),r.Grid=e("../collision/Grid"),r.Pairs=e("../collision/Pairs"),r.Pair=e("../collision/Pair"),r.Query=e("../collision/Query"),r.Resolver=e("../collision/Resolver"),r.SAT=e("../collision/SAT"),r.Constraint=e("../constraint/Constraint"),r.MouseConstraint=e("../constraint/MouseConstraint"),r.Common=e("../core/Common"),r.Engine=e("../core/Engine"),r.Events=e("../core/Events"),r.Mouse=e("../core/Mouse"),r.Runner=e("../core/Runner"),r.Sleeping=e("../core/Sleeping"),r.Plugin=e("../core/Plugin"),r.Bodies=e("../factory/Bodies"),r.Composites=e("../factory/Composites"),r.Axes=e("../geometry/Axes"),r.Bounds=e("../geometry/Bounds"),r.Svg=e("../geometry/Svg"),r.Vector=e("../geometry/Vector"),r.Vertices=e("../geometry/Vertices"),r.Render=e("../render/Render"),r.RenderPixi=e("../render/RenderPixi"),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,r.Engine.run=r.Runner.run},{"../body/Body":1,"../body/Composite":2,"../body/World":3,"../collision/Contact":4,"../collision/Detector":5,"../collision/Grid":6,"../collision/Pair":7,"../collision/Pairs":8,"../collision/Query":9,"../collision/Resolver":10,"../collision/SAT":11,"../constraint/Constraint":12,"../constraint/MouseConstraint":13,"../core/Common":14,"../core/Engine":15,"../core/Events":16,"../core/Matter":17,"../core/Metrics":18,"../core/Mouse":19,"../core/Plugin":20,"../core/Runner":21,"../core/Sleeping":22,"../factory/Bodies":23,"../factory/Composites":24,"../geometry/Axes":25,"../geometry/Bounds":26,"../geometry/Svg":27,"../geometry/Vector":28,"../geometry/Vertices":29,"../render/Render":31,"../render/RenderPixi":32}],31:[function(e,t,n){var b={};t.exports=b;var h=e("../core/Common"),M=e("../body/Composite"),w=e("../geometry/Bounds"),P=e("../core/Events"),S=e("../collision/Grid"),A=e("../geometry/Vector"),C=e("../core/Mouse");!function(){var r,t;"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(h.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),b.create=function(e){var t={controller:b,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,options:{width:800,height:600,pixelRatio:1,background:"#18181d",wireframeBackground:"#0f0f13",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},n=h.extend(t,e);return n.canvas&&(n.canvas.width=n.options.width||n.canvas.width,n.canvas.height=n.options.height||n.canvas.height),n.mouse=e.mouse,n.engine=e.engine,n.canvas=n.canvas||o(n.options.width,n.options.height),n.context=n.canvas.getContext("2d"),n.textures={},n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.canvas.width,y:n.canvas.height}},1!==n.options.pixelRatio&&b.setPixelRatio(n,n.options.pixelRatio),h.isElement(n.element)?n.element.appendChild(n.canvas):n.canvas.parentNode||h.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),n},b.run=function(n){!function e(t){n.frameRequestId=r(e),b.world(n)}()},b.stop=function(e){t(e.frameRequestId)},b.setPixelRatio=function(e,t){var n=e.options,r=e.canvas;"auto"===t&&(t=i(r)),n.pixelRatio=t,r.setAttribute("data-pixel-ratio",t),r.width=n.width*t,r.height=n.height*t,r.style.width=n.width+"px",r.style.height=n.height+"px",e.context.scale(t,t)},b.lookAt=function(e,t,n,r){r=void 0===r||r,t=h.isArray(t)?t:[t],n=n||{x:0,y:0};for(var o={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},i=0;i<t.length;i+=1){var a=t[i],s=a.bounds?a.bounds.min:a.min||a.position||a,c=a.bounds?a.bounds.max:a.max||a.position||a;s&&c&&(s.x<o.min.x&&(o.min.x=s.x),c.x>o.max.x&&(o.max.x=c.x),s.y<o.min.y&&(o.min.y=s.y),c.y>o.max.y&&(o.max.y=c.y))}var l=o.max.x-o.min.x+2*n.x,u=o.max.y-o.min.y+2*n.y,d=e.canvas.height,f=e.canvas.width/d,p=l/u,v=1,m=1;f<p?m=p/f:v=f/p,e.options.hasBounds=!0,e.bounds.min.x=o.min.x,e.bounds.max.x=o.min.x+l*v,e.bounds.min.y=o.min.y,e.bounds.max.y=o.min.y+u*m,r&&(e.bounds.min.x+=.5*l-l*v*.5,e.bounds.max.x+=.5*l-l*v*.5,e.bounds.min.y+=.5*u-u*m*.5,e.bounds.max.y+=.5*u-u*m*.5),e.bounds.min.x-=n.x,e.bounds.max.x-=n.x,e.bounds.min.y-=n.y,e.bounds.max.y-=n.y,e.mouse&&(C.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),C.setOffset(e.mouse,e.bounds.min))},b.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,r=t/e.options.width,o=n/e.options.height;e.context.scale(1/r,1/o),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},b.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},b.world=function(e){var t,n=e.engine,r=n.world,o=e.canvas,i=e.context,a=e.options,s=M.allBodies(r),c=M.allConstraints(r),l=a.wireframes?a.wireframeBackground:a.background,u=[],d=[],f={timestamp:n.timing.timestamp};if(P.trigger(e,"beforeRender",f),e.currentBackground!==l&&x(e,l),i.globalCompositeOperation="source-in",i.fillStyle="transparent",i.fillRect(0,0,o.width,o.height),i.globalCompositeOperation="source-over",a.hasBounds){for(t=0;t<s.length;t++){var p=s[t];w.overlaps(p.bounds,e.bounds)&&u.push(p)}for(t=0;t<c.length;t++){var v=c[t],m=v.bodyA,h=v.bodyB,y=v.pointA,g=v.pointB;m&&(y=A.add(m.position,v.pointA)),h&&(g=A.add(h.position,v.pointB)),y&&g&&(w.contains(e.bounds,y)||w.contains(e.bounds,g))&&d.push(v)}b.startViewTransform(e),e.mouse&&(C.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),C.setOffset(e.mouse,e.bounds.min))}else d=c,u=s;!a.wireframes||n.enableSleeping&&a.showSleeping?b.bodies(e,u,i):(a.showConvexHulls&&b.bodyConvexHulls(e,u,i),b.bodyWireframes(e,u,i)),a.showBounds&&b.bodyBounds(e,u,i),(a.showAxes||a.showAngleIndicator)&&b.bodyAxes(e,u,i),a.showPositions&&b.bodyPositions(e,u,i),a.showVelocity&&b.bodyVelocity(e,u,i),a.showIds&&b.bodyIds(e,u,i),a.showSeparations&&b.separations(e,n.pairs.list,i),a.showCollisions&&b.collisions(e,n.pairs.list,i),a.showVertexNumbers&&b.vertexNumbers(e,u,i),a.showMousePosition&&b.mousePosition(e,e.mouse,i),b.constraints(d,i),a.showBroadphase&&n.broadphase.controller===S&&b.grid(e,n.broadphase,i),a.showDebug&&b.debug(e,i),a.hasBounds&&b.endViewTransform(e),P.trigger(e,"afterRender",f)},b.debug=function(e,t){var n=t,r=e.engine,o=r.world,i=r.metrics,a=e.options;M.allBodies(o);if(500<=r.timing.timestamp-(e.debugTimestamp||0)){var s="";i.timing&&(s+="fps: "+Math.round(i.timing.fps)+"    "),e.debugString=s,e.debugTimestamp=r.timing.timestamp}if(e.debugString){n.font="12px Arial",a.wireframes?n.fillStyle="rgba(255,255,255,0.5)":n.fillStyle="rgba(0,0,0,0.5)";for(var c=e.debugString.split("\n"),l=0;l<c.length;l++)n.fillText(c[l],50,50+18*l)}},b.constraints=function(e,t){for(var n=t,r=0;r<e.length;r++){var o=e[r];if(o.render.visible&&o.pointA&&o.pointB){var i,a,s=o.bodyA,c=o.bodyB;if(i=s?A.add(s.position,o.pointA):o.pointA,"pin"===o.render.type)n.beginPath(),n.arc(i.x,i.y,3,0,2*Math.PI),n.closePath();else{if(a=c?A.add(c.position,o.pointB):o.pointB,n.beginPath(),n.moveTo(i.x,i.y),"spring"===o.render.type)for(var l,u=A.sub(a,i),d=A.perp(A.normalise(u)),f=Math.ceil(h.clamp(o.length/5,12,20)),p=1;p<f;p+=1)l=p%2==0?1:-1,n.lineTo(i.x+u.x*(p/f)+d.x*l*4,i.y+u.y*(p/f)+d.y*l*4);n.lineTo(a.x,a.y)}o.render.lineWidth&&(n.lineWidth=o.render.lineWidth,n.strokeStyle=o.render.strokeStyle,n.stroke()),o.render.anchors&&(n.fillStyle=o.render.strokeStyle,n.beginPath(),n.arc(i.x,i.y,3,0,2*Math.PI),n.arc(a.x,a.y,3,0,2*Math.PI),n.closePath(),n.fill())}}},b.bodyShadows=function(e,t,n){for(var r=n,o=(e.engine,0);o<t.length;o++){var i=t[o];if(i.render.visible){if(i.circleRadius)r.beginPath(),r.arc(i.position.x,i.position.y,i.circleRadius,0,2*Math.PI),r.closePath();else{r.beginPath(),r.moveTo(i.vertices[0].x,i.vertices[0].y);for(var a=1;a<i.vertices.length;a++)r.lineTo(i.vertices[a].x,i.vertices[a].y);r.closePath()}var s=i.position.x-.5*e.options.width,c=i.position.y-.2*e.options.height,l=Math.abs(s)+Math.abs(c);r.shadowColor="rgba(0,0,0,0.15)",r.shadowOffsetX=.05*s,r.shadowOffsetY=.05*c,r.shadowBlur=1+12*Math.min(1,l/1e3),r.fill(),r.shadowColor=null,r.shadowOffsetX=null,r.shadowOffsetY=null,r.shadowBlur=null}}},b.bodies=function(e,t,n){var r,o,i,a,s=n,c=(e.engine,e.options),l=c.showInternalEdges||!c.wireframes;for(i=0;i<t.length;i++)if((r=t[i]).render.visible)for(a=1<r.parts.length?1:0;a<r.parts.length;a++)if((o=r.parts[a]).render.visible){if(c.showSleeping&&r.isSleeping?s.globalAlpha=.5*o.render.opacity:1!==o.render.opacity&&(s.globalAlpha=o.render.opacity),o.render.sprite&&o.render.sprite.texture&&!c.wireframes){var u=o.render.sprite,d=p(e,u.texture);s.translate(o.position.x,o.position.y),s.rotate(o.angle),s.drawImage(d,d.width*-u.xOffset*u.xScale,d.height*-u.yOffset*u.yScale,d.width*u.xScale,d.height*u.yScale),s.rotate(-o.angle),s.translate(-o.position.x,-o.position.y)}else{if(o.circleRadius)s.beginPath(),s.arc(o.position.x,o.position.y,o.circleRadius,0,2*Math.PI);else{s.beginPath(),s.moveTo(o.vertices[0].x,o.vertices[0].y);for(var f=1;f<o.vertices.length;f++)!o.vertices[f-1].isInternal||l?s.lineTo(o.vertices[f].x,o.vertices[f].y):s.moveTo(o.vertices[f].x,o.vertices[f].y),o.vertices[f].isInternal&&!l&&s.moveTo(o.vertices[(f+1)%o.vertices.length].x,o.vertices[(f+1)%o.vertices.length].y);s.lineTo(o.vertices[0].x,o.vertices[0].y),s.closePath()}c.wireframes?(s.lineWidth=1,s.strokeStyle="#bbb",s.stroke()):(s.fillStyle=o.render.fillStyle,o.render.lineWidth&&(s.lineWidth=o.render.lineWidth,s.strokeStyle=o.render.strokeStyle,s.stroke()),s.fill())}s.globalAlpha=1}},b.bodyWireframes=function(e,t,n){var r,o,i,a,s,c=n,l=e.options.showInternalEdges;for(c.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(s=1<r.parts.length?1:0;s<r.parts.length;s++){for(o=r.parts[s],c.moveTo(o.vertices[0].x,o.vertices[0].y),a=1;a<o.vertices.length;a++)!o.vertices[a-1].isInternal||l?c.lineTo(o.vertices[a].x,o.vertices[a].y):c.moveTo(o.vertices[a].x,o.vertices[a].y),o.vertices[a].isInternal&&!l&&c.moveTo(o.vertices[(a+1)%o.vertices.length].x,o.vertices[(a+1)%o.vertices.length].y);c.lineTo(o.vertices[0].x,o.vertices[0].y)}c.lineWidth=1,c.strokeStyle="#bbb",c.stroke()},b.bodyConvexHulls=function(e,t,n){var r,o,i,a=n;for(a.beginPath(),o=0;o<t.length;o++)if((r=t[o]).render.visible&&1!==r.parts.length){for(a.moveTo(r.vertices[0].x,r.vertices[0].y),i=1;i<r.vertices.length;i++)a.lineTo(r.vertices[i].x,r.vertices[i].y);a.lineTo(r.vertices[0].x,r.vertices[0].y)}a.lineWidth=1,a.strokeStyle="rgba(255,255,255,0.2)",a.stroke()},b.vertexNumbers=function(e,t,n){var r,o,i,a=n;for(r=0;r<t.length;r++){var s=t[r].parts;for(i=1<s.length?1:0;i<s.length;i++){var c=s[i];for(o=0;o<c.vertices.length;o++)a.fillStyle="rgba(255,255,255,0.2)",a.fillText(r+"_"+o,c.position.x+.8*(c.vertices[o].x-c.position.x),c.position.y+.8*(c.vertices[o].y-c.position.y))}}},b.mousePosition=function(e,t,n){var r=n;r.fillStyle="rgba(255,255,255,0.8)",r.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},b.bodyBounds=function(e,t,n){var r=n,o=(e.engine,e.options);r.beginPath();for(var i=0;i<t.length;i++){if(t[i].render.visible)for(var a=t[i].parts,s=1<a.length?1:0;s<a.length;s++){var c=a[s];r.rect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}o.wireframes?r.strokeStyle="rgba(255,255,255,0.08)":r.strokeStyle="rgba(0,0,0,0.1)",r.lineWidth=1,r.stroke()},b.bodyAxes=function(e,t,n){var r,o,i,a,s=n,c=(e.engine,e.options);for(s.beginPath(),o=0;o<t.length;o++){var l=t[o],u=l.parts;if(l.render.visible)if(c.showAxes)for(i=1<u.length?1:0;i<u.length;i++)for(r=u[i],a=0;a<r.axes.length;a++){var d=r.axes[a];s.moveTo(r.position.x,r.position.y),s.lineTo(r.position.x+20*d.x,r.position.y+20*d.y)}else for(i=1<u.length?1:0;i<u.length;i++)for(r=u[i],a=0;a<r.axes.length;a++)s.moveTo(r.position.x,r.position.y),s.lineTo((r.vertices[0].x+r.vertices[r.vertices.length-1].x)/2,(r.vertices[0].y+r.vertices[r.vertices.length-1].y)/2)}c.wireframes?(s.strokeStyle="indianred",s.lineWidth=1):(s.strokeStyle="rgba(255, 255, 255, 0.4)",s.globalCompositeOperation="overlay",s.lineWidth=2),s.stroke(),s.globalCompositeOperation="source-over"},b.bodyPositions=function(e,t,n){var r,o,i,a,s=n,c=(e.engine,e.options);for(s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).render.visible)for(a=0;a<r.parts.length;a++)o=r.parts[a],s.arc(o.position.x,o.position.y,3,0,2*Math.PI,!1),s.closePath();for(c.wireframes?s.fillStyle="indianred":s.fillStyle="rgba(0,0,0,0.5)",s.fill(),s.beginPath(),i=0;i<t.length;i++)(r=t[i]).render.visible&&(s.arc(r.positionPrev.x,r.positionPrev.y,2,0,2*Math.PI,!1),s.closePath());s.fillStyle="rgba(255,165,0,0.8)",s.fill()},b.bodyVelocity=function(e,t,n){var r=n;r.beginPath();for(var o=0;o<t.length;o++){var i=t[o];i.render.visible&&(r.moveTo(i.position.x,i.position.y),r.lineTo(i.position.x+2*(i.position.x-i.positionPrev.x),i.position.y+2*(i.position.y-i.positionPrev.y)))}r.lineWidth=3,r.strokeStyle="cornflowerblue",r.stroke()},b.bodyIds=function(e,t,n){var r,o,i=n;for(r=0;r<t.length;r++)if(t[r].render.visible){var a=t[r].parts;for(o=1<a.length?1:0;o<a.length;o++){var s=a[o];i.font="12px Arial",i.fillStyle="rgba(255,255,255,0.5)",i.fillText(s.id,s.position.x+10,s.position.y-10)}}},b.collisions=function(e,t,n){var r,o,i,a,s=n,c=e.options;for(s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive)for(o=r.collision,a=0;a<r.activeContacts.length;a++){var l=r.activeContacts[a].vertex;s.rect(l.x-1.5,l.y-1.5,3.5,3.5)}for(c.wireframes?s.fillStyle="rgba(255,255,255,0.7)":s.fillStyle="orange",s.fill(),s.beginPath(),i=0;i<t.length;i++)if((r=t[i]).isActive&&(o=r.collision,0<r.activeContacts.length)){var u=r.activeContacts[0].vertex.x,d=r.activeContacts[0].vertex.y;2===r.activeContacts.length&&(u=(r.activeContacts[0].vertex.x+r.activeContacts[1].vertex.x)/2,d=(r.activeContacts[0].vertex.y+r.activeContacts[1].vertex.y)/2),o.bodyB===o.supports[0].body||!0===o.bodyA.isStatic?s.moveTo(u-8*o.normal.x,d-8*o.normal.y):s.moveTo(u+8*o.normal.x,d+8*o.normal.y),s.lineTo(u,d)}c.wireframes?s.strokeStyle="rgba(255,165,0,0.7)":s.strokeStyle="orange",s.lineWidth=1,s.stroke()},b.separations=function(e,t,n){var r,o,i,a,s,c=n,l=e.options;for(c.beginPath(),s=0;s<t.length;s++)if((r=t[s]).isActive){i=(o=r.collision).bodyA;var u=1;(a=o.bodyB).isStatic||i.isStatic||(u=.5),a.isStatic&&(u=0),c.moveTo(a.position.x,a.position.y),c.lineTo(a.position.x-o.penetration.x*u,a.position.y-o.penetration.y*u),u=1,a.isStatic||i.isStatic||(u=.5),i.isStatic&&(u=0),c.moveTo(i.position.x,i.position.y),c.lineTo(i.position.x+o.penetration.x*u,i.position.y+o.penetration.y*u)}l.wireframes?c.strokeStyle="rgba(255,165,0,0.5)":c.strokeStyle="orange",c.stroke()},b.grid=function(e,t,n){var r=n;e.options.wireframes?r.strokeStyle="rgba(255,180,0,0.1)":r.strokeStyle="rgba(255,180,0,0.5)",r.beginPath();for(var o=h.keys(t.buckets),i=0;i<o.length;i++){var a=o[i];if(!(t.buckets[a].length<2)){var s=a.split(/C|R/);r.rect(.5+parseInt(s[1],10)*t.bucketWidth,.5+parseInt(s[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}r.lineWidth=1,r.stroke()},b.inspector=function(e,t){e.engine;var n,r=e.selected,o=e.render,i=o.options;if(i.hasBounds){var a=o.bounds.max.x-o.bounds.min.x,s=o.bounds.max.y-o.bounds.min.y,c=a/o.options.width,l=s/o.options.height;t.scale(1/c,1/l),t.translate(-o.bounds.min.x,-o.bounds.min.y)}for(var u=0;u<r.length;u++){var d=r[u].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),d.type){case"body":n=d.bounds,t.beginPath(),t.rect(Math.floor(n.min.x-3),Math.floor(n.min.y-3),Math.floor(n.max.x-n.min.x+6),Math.floor(n.max.y-n.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var f=d.pointA;d.bodyA&&(f=d.pointB),t.beginPath(),t.arc(f.x,f.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",n=e.selectBounds,t.beginPath(),t.rect(Math.floor(n.min.x),Math.floor(n.min.y),Math.floor(n.max.x-n.min.x),Math.floor(n.max.y-n.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),i.hasBounds&&t.setTransform(1,0,0,1,0,0)};var o=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n.oncontextmenu=function(){return!1},n.onselectstart=function(){return!1},n},i=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},p=function(e,t){var n=e.textures[t];return n||((n=e.textures[t]=new Image).src=t,n)},x=function(e,t){var n=t;/(jpg|gif|png)$/.test(t)&&(n="url("+t+")"),e.canvas.style.background=n,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},{"../body/Composite":2,"../collision/Grid":6,"../core/Common":14,"../core/Events":16,"../core/Mouse":19,"../geometry/Bounds":26,"../geometry/Vector":28}],32:[function(e,t,n){var x={};t.exports=x;var b=e("../geometry/Bounds"),M=e("../body/Composite"),p=e("../core/Common"),o=e("../core/Events"),w=e("../geometry/Vector");!function(){var r,t;"undefined"!=typeof window&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(p.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),x.create=function(e){p.warn("RenderPixi.create: Matter.RenderPixi is deprecated (see docs)");var t={controller:x,engine:null,element:null,frameRequestId:null,canvas:null,renderer:null,container:null,spriteContainer:null,pixiOptions:null,options:{width:800,height:600,background:"#fafafa",wireframeBackground:"#222",hasBounds:!1,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showShadows:!1}},n=p.extend(t,e),r=!n.options.wireframes&&"transparent"===n.options.background;return n.pixiOptions=n.pixiOptions||{view:n.canvas,transparent:r,antialias:!0,backgroundColor:e.background},n.mouse=e.mouse,n.engine=e.engine,n.renderer=n.renderer||new PIXI.WebGLRenderer(n.options.width,n.options.height,n.pixiOptions),n.container=n.container||new PIXI.Container,n.spriteContainer=n.spriteContainer||new PIXI.Container,n.canvas=n.canvas||n.renderer.view,n.bounds=n.bounds||{min:{x:0,y:0},max:{x:n.options.width,y:n.options.height}},o.on(n.engine,"beforeUpdate",function(){x.clear(n)}),n.textures={},n.sprites={},n.primitives={},n.container.addChild(n.spriteContainer),p.isElement(n.element)?n.element.appendChild(n.canvas):p.warn('No "render.element" passed, "render.canvas" was not inserted into document.'),n.canvas.oncontextmenu=function(){return!1},n.canvas.onselectstart=function(){return!1},n},x.run=function(n){!function e(t){n.frameRequestId=r(e),x.world(n)}()},x.stop=function(e){t(e.frameRequestId)},x.clear=function(e){for(var t=e.container,n=e.spriteContainer;t.children[0];)t.removeChild(t.children[0]);for(;n.children[0];)n.removeChild(n.children[0]);var r=e.sprites["bg-0"];e.textures={},e.sprites={},e.primitives={},(e.sprites["bg-0"]=r)&&t.addChildAt(r,0),e.container.addChild(e.spriteContainer),e.currentBackground=null,t.scale.set(1,1),t.position.set(0,0)},x.setBackground=function(e,t){if(e.currentBackground!==t){var n=t.indexOf&&-1!==t.indexOf("#"),r=e.sprites["bg-0"];if(n){var o=p.colorToNumber(t);e.renderer.backgroundColor=o,r&&e.container.removeChild(r)}else if(!r){var i=a(e,t);(r=e.sprites["bg-0"]=new PIXI.Sprite(i)).position.x=0,r.position.y=0,e.container.addChildAt(r,0)}e.currentBackground=t}},x.world=function(e){var t,n=e.engine.world,r=e.renderer,o=e.container,i=e.options,a=M.allBodies(n),s=M.allConstraints(n),c=[];i.wireframes?x.setBackground(e,i.wireframeBackground):x.setBackground(e,i.background);var l=e.bounds.max.x-e.bounds.min.x,u=e.bounds.max.y-e.bounds.min.y,d=l/e.options.width,f=u/e.options.height;if(i.hasBounds){for(t=0;t<a.length;t++){var p=a[t];p.render.sprite.visible=b.overlaps(p.bounds,e.bounds)}for(t=0;t<s.length;t++){var v=s[t],m=v.bodyA,h=v.bodyB,y=v.pointA,g=v.pointB;m&&(y=w.add(m.position,v.pointA)),h&&(g=w.add(h.position,v.pointB)),y&&g&&(b.contains(e.bounds,y)||b.contains(e.bounds,g))&&c.push(v)}o.scale.set(1/d,1/f),o.position.set(-e.bounds.min.x*(1/d),-e.bounds.min.y*(1/f))}else c=s;for(t=0;t<a.length;t++)x.body(e,a[t]);for(t=0;t<c.length;t++)x.constraint(e,c[t]);r.render(o)},x.constraint=function(e,t){e.engine;var n=t.bodyA,r=t.bodyB,o=t.pointA,i=t.pointB,a=e.container,s=t.render,c="c-"+t.id,l=e.primitives[c];l=l||(e.primitives[c]=new PIXI.Graphics),s.visible&&t.pointA&&t.pointB?(-1===p.indexOf(a.children,l)&&a.addChild(l),l.clear(),l.beginFill(0,0),l.lineStyle(s.lineWidth,p.colorToNumber(s.strokeStyle),1),n?l.moveTo(n.position.x+o.x,n.position.y+o.y):l.moveTo(o.x,o.y),r?l.lineTo(r.position.x+i.x,r.position.y+i.y):l.lineTo(i.x,i.y),l.endFill()):l.clear()},x.body=function(e,t){e.engine;var n=t.render;if(n.visible)if(n.sprite&&n.sprite.texture){var r="b-"+t.id,o=e.sprites[r],i=e.spriteContainer;o=o||(e.sprites[r]=l(e,t)),-1===p.indexOf(i.children,o)&&i.addChild(o),o.position.x=t.position.x,o.position.y=t.position.y,o.rotation=t.angle,o.scale.x=n.sprite.xScale||1,o.scale.y=n.sprite.yScale||1}else{var a="b-"+t.id,s=e.primitives[a],c=e.container;s||((s=e.primitives[a]=u(e,t)).initialAngle=t.angle),-1===p.indexOf(c.children,s)&&c.addChild(s),s.position.x=t.position.x,s.position.y=t.position.y,s.rotation=t.angle-s.initialAngle}};var l=function(e,t){var n=t.render.sprite.texture,r=a(e,n),o=new PIXI.Sprite(r);return o.anchor.x=t.render.sprite.xOffset,o.anchor.y=t.render.sprite.yOffset,o},u=function(e,t){var n,r=t.render,o=e.options,i=new PIXI.Graphics,a=p.colorToNumber(r.fillStyle),s=p.colorToNumber(r.strokeStyle),c=p.colorToNumber(r.strokeStyle),l=p.colorToNumber("#bbb"),u=p.colorToNumber("#CD5C5C");i.clear();for(var d=1<t.parts.length?1:0;d<t.parts.length;d++){n=t.parts[d],o.wireframes?(i.beginFill(0,0),i.lineStyle(1,l,1)):(i.beginFill(a,1),i.lineStyle(r.lineWidth,s,1)),i.moveTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y);for(var f=1;f<n.vertices.length;f++)i.lineTo(n.vertices[f].x-t.position.x,n.vertices[f].y-t.position.y);i.lineTo(n.vertices[0].x-t.position.x,n.vertices[0].y-t.position.y),i.endFill(),(o.showAngleIndicator||o.showAxes)&&(i.beginFill(0,0),o.wireframes?i.lineStyle(1,u,1):i.lineStyle(1,c),i.moveTo(n.position.x-t.position.x,n.position.y-t.position.y),i.lineTo((n.vertices[0].x+n.vertices[n.vertices.length-1].x)/2-t.position.x,(n.vertices[0].y+n.vertices[n.vertices.length-1].y)/2-t.position.y),i.endFill())}return i},a=function(e,t){var n=e.textures[t];return n=n||(e.textures[t]=PIXI.Texture.fromImage(t))}}()},{"../body/Composite":2,"../core/Common":14,"../core/Events":16,"../geometry/Bounds":26,"../geometry/Vector":28}]},{},[30])(30)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=(o.get=function(){return void 0===this.instance&&(this.instance=new o),this.instance},o.prototype.requestAuthority=function(){this._isAuthority=!0},o.prototype.hasAuthority=function(){return this._isAuthority},o);function o(){this._isAuthority=!1}n.Authority=r,n.default=r},{}],14:[function(e,t,n){"use strict";var r;Object.defineProperty(n,"__esModule",{value:!0}),(r=n.Directions||(n.Directions={}))[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("./map/levelMap"),o=e("./physicsEngine");e("../common/authority").default.get().requestAuthority(),document.addEventListener("DOMContentLoaded",function(){o.default.init();var e=new r.LevelMap("../level/level1.json",document.body);e.wait.then(function(){o.default.showDebugRenderer(e),o.default.start()})})},{"../common/authority":13,"./map/levelMap":16,"./physicsEngine":17}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("gl-matrix"),o=e("../../common/authority"),i=e("../physicsEngine"),a=e("matter-js"),s=(c.prototype.parse=function(e){this.size=r.vec2.fromValues(e.size[0],e.size[1]),this.createBounds()},c.prototype.createBounds=function(){if(!o.default.get().hasAuthority()){var e=this.size[0],t=this.size[1];a.World.add(i.default.world,[a.Bodies.rectangle(e/2,-50,e,100,{isStatic:!0}),a.Bodies.rectangle(e/2,t+50,e,100,{isStatic:!0}),a.Bodies.rectangle(e+50,t/2,100,t+200,{isStatic:!0}),a.Bodies.rectangle(-50,t/2,100,t+200,{isStatic:!0})])}},c.prototype.addLevelObject=function(e){this.objects.push(e)},c.prototype.getAllLevelObjects=function(){return this.objects.slice()},c.prototype.getAllLevelObjectsByType=function(t){return this.objects.filter(function(e){return e instanceof t})},c);function c(e){var t=this;this.url=e,this.objects=[],this.wait=fetch(e).then(function(e){return e.json()}).then(function(e){t.parse(e)})}n.LevelMap=s;l.prototype.gateCreatePhysics=function(){o.default.get().hasAuthority()||this.createPysics()},l.prototype.createPysics=function(){},l.prototype.render=function(){return document.createElement("div")};function l(e,t,n){this.LevelMap=e,this.position=t,this.meta=n,e.addLevelObject(this),this.gateCreatePhysics()}},{"../../common/authority":13,"../physicsEngine":17,"gl-matrix":2,"matter-js":12}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=e("matter-js"),i=e("gl-matrix"),a=e("../common/enums"),r=(s.init=function(){this.engine=o.Engine.create(),this.world=this.engine.world,this.world.gravity={scale:0,x:0,y:0},this.runner=o.Runner.create()},s.start=function(){o.Runner.run(this.runner,this.engine)},s.stop=function(){o.Runner.stop(this.runner)},s.showDebugRenderer=function(e){if(void 0===this.render){var t=Math.min(250/e.size[0],250/e.size[1]),n=document.createElement("div");n.style.position="fixed",n.style.top="5px",n.style.left="5px",n.style.transformOrigin="top left",n.style.transform="scale("+t.toFixed(4)+")",this.render=o.Render.create({element:n,engine:this.engine,options:{width:e.size[0],height:e.size[1],wireframes:!1}}),o.Render.lookAt(this.render,{min:{x:0,y:0},max:{x:e.size[0],y:e.size[1]}}),this.debugElement=n}o.Render.run(this.render),document.body.append(this.debugElement)},s.hideDebugRenderer=function(){o.Render.stop(this.render),document.body.removeChild(this.debugElement)},s.showDebugPlayer=function(){var n=o.Bodies.circle(5,5,10,{frictionStatic:1,frictionAir:.4});o.World.add(this.world,[n]),o.Events.on(this.engine,"beforeUpdate",function(e){var t=i.vec2.create();0!==r.size&&(r.forEach(function(e){switch(e){case a.Directions.UP:i.vec2.add(t,t,[0,-1]);break;case a.Directions.DOWN:i.vec2.add(t,t,[0,1]);break;case a.Directions.LEFT:i.vec2.add(t,t,[-1,0]);break;case a.Directions.RIGHT:i.vec2.add(t,t,[1,0])}}),i.vec2.normalize(t,t),o.Body.applyForce(n,n.position,{x:.001*t[0],y:.001*t[1]}))});var r=new Set;window.addEventListener("keydown",function(e){switch(e.key){case"w":r.add(a.Directions.UP);break;case"s":r.add(a.Directions.DOWN);break;case"a":r.add(a.Directions.LEFT);break;case"d":r.add(a.Directions.RIGHT)}}),window.addEventListener("keyup",function(e){switch(e.key){case"w":r.delete(a.Directions.UP);break;case"s":r.delete(a.Directions.DOWN);break;case"a":r.delete(a.Directions.LEFT);break;case"d":r.delete(a.Directions.RIGHT)}})},s);function s(){}n.PhysicsEngine=r,n.default=r},{"../common/enums":14,"gl-matrix":2,"matter-js":12}]},{},[15]);
//# sourceMappingURL=index.min.js.map
