{"version":3,"names":[],"mappings":"","sources":["index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../common/index\");\nvar Views;\n(function (Views) {\n    Views[Views[\"splashscreen\"] = 0] = \"splashscreen\";\n    Views[Views[\"characterselection\"] = 1] = \"characterselection\";\n    Views[Views[\"playscreen\"] = 2] = \"playscreen\";\n    Views[Views[\"endscreen\"] = 3] = \"endscreen\";\n})(Views || (Views = {}));\nvar Controller = /** @class */ (function () {\n    function Controller(client) {\n        var _this = this;\n        this.client = client;\n        this.startPos = undefined;\n        document.addEventListener('DOMContentLoaded', function () {\n            _this.virtualController();\n            _this.client.updateServerState(_this.updateView);\n        });\n    }\n    Controller.prototype.showView = function (view) {\n        document.querySelectorAll(Views[view])[0].classList.add('visible');\n    };\n    Controller.prototype.hideView = function (view) {\n        document.querySelectorAll(Views[view])[0].classList.remove('visible');\n    };\n    Controller.prototype.updateView = function (serverState) {\n        switch (serverState) {\n            case index_1.ServerState.lobby:\n                this.showView(Views.splashscreen);\n                break;\n            case index_1.ServerState.characterSelection:\n                this.showView(Views.characterselection);\n                break;\n            case index_1.ServerState.running:\n                this.showView(Views.playscreen);\n                break;\n            case index_1.ServerState.final:\n                this.showView(Views.endscreen);\n                break;\n            default:\n                console.error('not implemented', serverState);\n        }\n    };\n    Controller.prototype.virtualController = function () {\n        var _this = this;\n        document.querySelectorAll('controller')[0].addEventListener('touchstart', function (ev) {\n            console.log('touchstart');\n            _this.startPos = [ev.targetTouches[0].clientX, ev.targetTouches[0].clientY];\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchmove', function (ev) {\n            if (_this.startPos !== undefined) {\n                _this.client.sendControllerData(new index_1.ControllerData(ev.targetTouches[0].clientX - _this.startPos[0], ev.targetTouches[0].clientY - _this.startPos[1]));\n            }\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchend', function (ev) {\n            _this.startPos = undefined;\n        });\n    };\n    Controller.prototype.splashscreen = function () {\n        var _this = this;\n        document.querySelectorAll('splashscreen > button').forEach(function (btn) {\n            var character = document.querySelectorAll('splashscreen > character')[0];\n            var isPlayerAngryDad = _this.client.toggleAngryDad();\n            if (isPlayerAngryDad) {\n                character.innerHTML = 'You would like to be angry dad!';\n            }\n            else {\n                character.innerHTML = 'You would like to be a wichtel!';\n            }\n        });\n        var timeUntilStartInterval = setInterval(function () {\n            var timeUntilStart = _this.client.getTimeUntilStart();\n            document.querySelectorAll('splashscreen > time')[0].innerHTML = timeUntilStart;\n            if (timeUntilStart === 0) {\n                clearInterval(timeUntilStartInterval);\n            }\n        }, 1000);\n    };\n    return Controller;\n}());\nvar client = new index_1.Client();\nnew Controller(client);\n\n//# sourceMappingURL=index.js.map\n"],"file":"index.js"}