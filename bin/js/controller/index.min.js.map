{"version":3,"sources":["index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","Module","PlayerData","x","y","deviceId","isReady","this","transactionType","TransactionType","playerState","PlayerState","idle","characterAppearanceType","CharacterAppearanceType","wichtel1","isAngryDad","undefined","id","ServerState","ControllerData","ServerData","timerValueInSeconds","ObjectData","2","Views","index_1","Controller","client","_this","startPos","document","addEventListener","virtualController","updateServerState","updateView","prototype","showView","view","querySelectorAll","classList","add","hideView","remove","serverState","lobby","splashscreen","characterSelection","characterselection","running","playscreen","final","endscreen","console","error","ev","log","targetTouches","clientX","clientY","sendControllerData","forEach","btn","character","isPlayerAngryDad","toggleAngryDad","innerHTML","timeUntilStartInterval","setInterval","timeUntilStart","getTime","clearInterval","Client","../common/index"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IACtDP,EAAQQ,OAAS,SAEb,SADAC,EACoBC,EAAGC,EAAGC,EAAUC,GAChCC,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKC,gBAAkBC,EAAgBP,WACvCK,KAAKG,YAAcC,EAAYC,KAC/BL,KAAKM,wBAA0BC,EAAwBC,SACvDR,KAAKS,gBAAaC,EAClBV,KAAKW,GAAK,EACVX,KAAKW,GAAKb,EATlB,IAcII,EACOA,EAOAU,EATX1B,EAAQS,WAAaA,GAEVO,EAKRA,EAAkBhB,EAAQgB,kBAAoBhB,EAAQgB,gBAAkB,KAJvDA,EAA4B,WAAI,GAAK,aACrDA,EAAgBA,EAA4B,WAAI,GAAK,aACrDA,EAAgBA,EAAgC,eAAI,GAAK,iBACzDA,EAAgBA,EAA4B,WAAI,GAAK,cAG9CU,EAOM1B,EAAQ0B,cAAgB1B,EAAQ0B,YAAc,KAN/CA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAmB,MAAI,GAAK,QACxCA,EAAYA,EAAgC,mBAAI,GAAK,qBACrDA,EAAYA,EAAsB,SAAI,GAAK,WAC3CA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAmB,MAAI,GAAK,QAGxC,SADAC,EACwBjB,EAAGC,QACb,IAAND,IAAgBA,EAAI,QACd,IAANC,IAAgBA,EAAI,GACxBG,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKC,gBAAkBC,EAAgBW,eACvCb,KAAKW,GAAK,EAIlBzB,EAAQ2B,eAAiBA,EAErB,SADAC,EACoBC,GAChBf,KAAKe,oBAAsBA,EAFnC,IAOIX,EACOA,EAMPG,EACOA,EATXrB,EAAQ4B,WAAaA,GAEVV,EAKRA,EAAclB,EAAQkB,cAAgBlB,EAAQkB,YAAc,KAJ/CA,EAAkB,KAAI,GAAK,OACvCA,EAAYA,EAAkB,KAAI,GAAK,OACvCA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAyB,YAAI,GAAK,eAGvCG,EAKRA,EAA0BrB,EAAQqB,0BAA4BrB,EAAQqB,wBAA0B,KAJvEA,EAAkC,SAAI,GAAK,WACnEA,EAAwBA,EAAkC,SAAI,GAAK,WACnEA,EAAwBA,EAAkC,SAAI,GAAK,WACnEA,EAAwBA,EAAkC,SAAI,GAAK,WAGnE,SADAS,EACoBpB,EAAGC,EAAGc,QACZ,IAANf,IAAgBA,EAAI,QACd,IAANC,IAAgBA,EAAI,GACxBG,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKW,GAAKA,EAIlBzB,EAAQ8B,WAAaA,GAInB,IAAIC,EAAE,CAAC,SAASrC,EAAQU,EAAOJ,GACjC,aACAK,OAAOC,eAAeN,EAAS,aAAc,CAAEO,OAAO,IACtD,IACIyB,EACOA,EAFPC,EAAUvC,EAAQ,mBASlB,SAASwC,EAAWC,GAChB,IAAIC,EAAQtB,KACZA,KAAKqB,OAASA,EACdrB,KAAKuB,cAAWb,EAChBc,SAASC,iBAAiB,mBAAoB,WAC1CH,EAAMI,oBACNJ,EAAMD,OAAOM,kBAAkBL,EAAMM,eAbtCV,EAKEA,EAAVA,GAAkB,IAJXA,EAAoB,aAAI,GAAK,eACnCA,EAAMA,EAA0B,mBAAI,GAAK,qBACzCA,EAAMA,EAAkB,WAAI,GAAK,aACjCA,EAAMA,EAAiB,UAAI,GAAK,YA0EpC,IA9DIE,EAAWS,UAAUC,SAAW,SAAUC,GACtCP,SAASQ,iBAAiBd,EAAMa,IAAO,GAAGE,UAAUC,IAAI,YAE5Dd,EAAWS,UAAUM,SAAW,SAAUJ,GACtCP,SAASQ,iBAAiBd,EAAMa,IAAO,GAAGE,UAAUG,OAAO,YAE/DhB,EAAWS,UAAUD,WAAa,SAAUS,GACxC,OAAQA,GACJ,KAAKlB,EAAQP,YAAY0B,MACrBtC,KAAK8B,SAASZ,EAAMqB,cACpB,MACJ,KAAKpB,EAAQP,YAAY4B,mBACrBxC,KAAK8B,SAASZ,EAAMuB,oBACpB,MACJ,KAAKtB,EAAQP,YAAY8B,QACrB1C,KAAK8B,SAASZ,EAAMyB,YACpB,MACJ,KAAKxB,EAAQP,YAAYgC,MACrB5C,KAAK8B,SAASZ,EAAM2B,WACpB,MACJ,QACIC,QAAQC,MAAM,kBAAmBV,KAG7CjB,EAAWS,UAAUH,kBAAoB,WACrC,IAAIJ,EAAQtB,KACZwB,SAASQ,iBAAiB,cAAc,GAAGP,iBAAiB,aAAc,SAAUuB,GAChFF,QAAQG,IAAI,cACZ3B,EAAMC,SAAW,CAACyB,EAAGE,cAAc,GAAGC,QAASH,EAAGE,cAAc,GAAGE,WAEvE5B,SAASQ,iBAAiB,cAAc,GAAGP,iBAAiB,YAAa,SAAUuB,QACxDtC,IAAnBY,EAAMC,UACND,EAAMD,OAAOgC,mBAAmB,IAAIlC,EAAQN,eAAemC,EAAGE,cAAc,GAAGC,QAAU7B,EAAMC,SAAS,GAAIyB,EAAGE,cAAc,GAAGE,QAAU9B,EAAMC,SAAS,OAGjKC,SAASQ,iBAAiB,cAAc,GAAGP,iBAAiB,WAAY,SAAUuB,GAC9E1B,EAAMC,cAAWb,KAGzBU,EAAWS,UAAUU,aAAe,WAChC,IAAIjB,EAAQtB,KACZwB,SAASQ,iBAAiB,yBAAyBsB,QAAQ,SAAUC,GACjE,IAAIC,EAAYhC,SAASQ,iBAAiB,4BAA4B,GAClEyB,EAAmBnC,EAAMD,OAAOqC,iBAEhCF,EAAUG,UADVF,EACsB,kCAGA,oCAG9B,IAAIG,EAAyBC,YAAY,WACrC,IAAIC,EAAiBxC,EAAMD,OAAO0C,UAEX,KADvBvC,SAASQ,iBAAiB,uBAAuB,GAAG2B,UAAYG,IAE5DE,cAAcJ,IAEnB,MAEAxC,GAEE,IAAID,EAAQ8C,SAKvB,CAACC,kBAAkB,KAAK,GAAG,CAAC","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Module = \"common\";\nvar PlayerData = /** @class */ (function () {\n    function PlayerData(x, y, deviceId, isReady) {\n        this.x = x;\n        this.y = y;\n        this.transactionType = TransactionType.PlayerData;\n        this.playerState = PlayerState.idle;\n        this.characterAppearanceType = CharacterAppearanceType.wichtel1;\n        this.isAngryDad = undefined;\n        this.id = 0;\n        this.id = deviceId;\n    }\n    return PlayerData;\n}());\nexports.PlayerData = PlayerData;\nvar TransactionType;\n(function (TransactionType) {\n    TransactionType[TransactionType[\"ServerData\"] = 0] = \"ServerData\";\n    TransactionType[TransactionType[\"PlayerData\"] = 1] = \"PlayerData\";\n    TransactionType[TransactionType[\"ControllerData\"] = 2] = \"ControllerData\";\n    TransactionType[TransactionType[\"ObjectData\"] = 3] = \"ObjectData\";\n})(TransactionType = exports.TransactionType || (exports.TransactionType = {}));\nvar ServerState;\n(function (ServerState) {\n    ServerState[ServerState[\"initial\"] = 0] = \"initial\";\n    ServerState[ServerState[\"lobby\"] = 1] = \"lobby\";\n    ServerState[ServerState[\"characterSelection\"] = 2] = \"characterSelection\";\n    ServerState[ServerState[\"starting\"] = 3] = \"starting\";\n    ServerState[ServerState[\"running\"] = 4] = \"running\";\n    ServerState[ServerState[\"final\"] = 5] = \"final\";\n})(ServerState = exports.ServerState || (exports.ServerState = {}));\nvar ControllerData = /** @class */ (function () {\n    function ControllerData(x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this.x = x;\n        this.y = y;\n        this.transactionType = TransactionType.ControllerData;\n        this.id = 0;\n    }\n    return ControllerData;\n}());\nexports.ControllerData = ControllerData;\nvar ServerData = /** @class */ (function () {\n    function ServerData(timerValueInSeconds) {\n        this.timerValueInSeconds = timerValueInSeconds;\n    }\n    return ServerData;\n}());\nexports.ServerData = ServerData;\nvar PlayerState;\n(function (PlayerState) {\n    PlayerState[PlayerState[\"idle\"] = 0] = \"idle\";\n    PlayerState[PlayerState[\"dead\"] = 1] = \"dead\";\n    PlayerState[PlayerState[\"running\"] = 2] = \"running\";\n    PlayerState[PlayerState[\"interacting\"] = 3] = \"interacting\";\n})(PlayerState = exports.PlayerState || (exports.PlayerState = {}));\nvar CharacterAppearanceType;\n(function (CharacterAppearanceType) {\n    CharacterAppearanceType[CharacterAppearanceType[\"wichtel1\"] = 0] = \"wichtel1\";\n    CharacterAppearanceType[CharacterAppearanceType[\"wichtel2\"] = 1] = \"wichtel2\";\n    CharacterAppearanceType[CharacterAppearanceType[\"wichtel3\"] = 2] = \"wichtel3\";\n    CharacterAppearanceType[CharacterAppearanceType[\"wichtel4\"] = 3] = \"wichtel4\";\n})(CharacterAppearanceType = exports.CharacterAppearanceType || (exports.CharacterAppearanceType = {}));\nvar ObjectData = /** @class */ (function () {\n    function ObjectData(x, y, id) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this.x = x;\n        this.y = y;\n        this.id = id;\n    }\n    return ObjectData;\n}());\nexports.ObjectData = ObjectData;\n\n\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../common/index\");\nvar Views;\n(function (Views) {\n    Views[Views[\"splashscreen\"] = 0] = \"splashscreen\";\n    Views[Views[\"characterselection\"] = 1] = \"characterselection\";\n    Views[Views[\"playscreen\"] = 2] = \"playscreen\";\n    Views[Views[\"endscreen\"] = 3] = \"endscreen\";\n})(Views || (Views = {}));\nvar Controller = /** @class */ (function () {\n    function Controller(client) {\n        var _this = this;\n        this.client = client;\n        this.startPos = undefined;\n        document.addEventListener('DOMContentLoaded', function () {\n            _this.virtualController();\n            _this.client.updateServerState(_this.updateView);\n        });\n    }\n    Controller.prototype.showView = function (view) {\n        document.querySelectorAll(Views[view])[0].classList.add('visible');\n    };\n    Controller.prototype.hideView = function (view) {\n        document.querySelectorAll(Views[view])[0].classList.remove('visible');\n    };\n    Controller.prototype.updateView = function (serverState) {\n        switch (serverState) {\n            case index_1.ServerState.lobby:\n                this.showView(Views.splashscreen);\n                break;\n            case index_1.ServerState.characterSelection:\n                this.showView(Views.characterselection);\n                break;\n            case index_1.ServerState.running:\n                this.showView(Views.playscreen);\n                break;\n            case index_1.ServerState.final:\n                this.showView(Views.endscreen);\n                break;\n            default:\n                console.error('not implemented', serverState);\n        }\n    };\n    Controller.prototype.virtualController = function () {\n        var _this = this;\n        document.querySelectorAll('controller')[0].addEventListener('touchstart', function (ev) {\n            console.log('touchstart');\n            _this.startPos = [ev.targetTouches[0].clientX, ev.targetTouches[0].clientY];\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchmove', function (ev) {\n            if (_this.startPos !== undefined) {\n                _this.client.sendControllerData(new index_1.ControllerData(ev.targetTouches[0].clientX - _this.startPos[0], ev.targetTouches[0].clientY - _this.startPos[1]));\n            }\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchend', function (ev) {\n            _this.startPos = undefined;\n        });\n    };\n    Controller.prototype.splashscreen = function () {\n        var _this = this;\n        document.querySelectorAll('splashscreen > button').forEach(function (btn) {\n            var character = document.querySelectorAll('splashscreen > character')[0];\n            var isPlayerAngryDad = _this.client.toggleAngryDad();\n            if (isPlayerAngryDad) {\n                character.innerHTML = 'You would like to be angry dad!';\n            }\n            else {\n                character.innerHTML = 'You would like to be a wichtel!';\n            }\n        });\n        var timeUntilStartInterval = setInterval(function () {\n            var timeUntilStart = _this.client.getTime();\n            document.querySelectorAll('splashscreen > time')[0].innerHTML = timeUntilStart;\n            if (timeUntilStart === 0) {\n                clearInterval(timeUntilStartInterval);\n            }\n        }, 1000);\n    };\n    return Controller;\n}());\nvar client = new index_1.Client();\nnew Controller(client);\n\n\n\n},{\"../common/index\":1}]},{},[2]);\n\n//# sourceMappingURL=index.js.map\n"]}