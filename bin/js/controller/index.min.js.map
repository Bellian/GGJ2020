{"version":3,"sources":["index.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","Object","defineProperty","value","Module","Server","prototype","sendPlayerData","this","sendAllClients","playerData","data","airConsole","broadcast","AirConsole","Client","getPlayers","_this","setInterval","airconsole","getPlayerData","sendControllerData","controllerData","id","message","SCREEN","JSON","stringify","recive","subscribeToAirConsole","onMessage","from","filter","getDeviceId","PlayerData","x","y","deviceId","isReady","type","TransactionType","playerState","PlayerState","idle","isAngryDad","ServerState","ControllerData","2","index_1","Controller","client","startPos","undefined","document","addEventListener","virtualController","updateServerState","updateView","serverState","ser","querySelectorAll","ev","console","log","targetTouches","clientX","clientY","splashscreen","forEach","btn","character","isPlayerAngryDad","toggleAngryDad","innerHTML","timeUntilStartInterval","timeUntilStart","getTimeUntilStart","clearInterval","../common/index"],"mappings":"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","file":"index.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Module = \"common\";\nvar Server = /** @class */ (function () {\n    function Server() {\n        this.airConsole = new AirConsole();\n        this.playerData = [];\n    }\n    Server.prototype.sendPlayerData = function () {\n        this.sendAllClients(this.playerData);\n    };\n    Server.prototype.sendAllClients = function (data) {\n        this.airConsole.broadcast(data);\n    };\n    return Server;\n}());\nexports.Server = Server;\nvar Client = /** @class */ (function () {\n    function Client() {\n        this.id = 0;\n        this.playerData = [];\n        if (!this.id)\n            this.id = this.airconsole.getDeviceId();\n        this.airconsole = new AirConsole();\n        this.subscribeToAirConsole();\n        this.getPlayers();\n    }\n    Client.prototype.getPlayers = function () {\n        var _this = this;\n        setInterval(function () {\n            (_this.playerData = _this.airconsole.getPlayerData()), 300;\n        });\n    };\n    Client.prototype.sendControllerData = function (controllerData) {\n        controllerData.id = this.id;\n        this.airconsole.message(AirConsole.SCREEN, JSON.stringify(controllerData));\n    };\n    Client.prototype.recive = function () {\n        this.playerData;\n    };\n    Client.prototype.subscribeToAirConsole = function () {\n        this.onMessage();\n    };\n    Client.prototype.onMessage = function () {\n        this.airconsole.onMessage = function (from, data) {\n            data.filter();\n        };\n    };\n    return Client;\n}());\nexports.Client = Client;\nvar PlayerData = /** @class */ (function () {\n    function PlayerData(x, y, deviceId, isReady) {\n        this.x = x;\n        this.y = y;\n        this.type = TransactionType.PlayerData;\n        this.playerState = PlayerState.idle;\n        this.isAngryDad = false;\n        this.isReady = false;\n        this.id = 0;\n        this.id = deviceId;\n        this.isReady = isReady;\n    }\n    return PlayerData;\n}());\nexports.PlayerData = PlayerData;\nvar TransactionType;\n(function (TransactionType) {\n    TransactionType[TransactionType[\"ServerState\"] = 0] = \"ServerState\";\n    TransactionType[TransactionType[\"PlayerData\"] = 1] = \"PlayerData\";\n    TransactionType[TransactionType[\"ControllerData\"] = 2] = \"ControllerData\";\n})(TransactionType = exports.TransactionType || (exports.TransactionType = {}));\nvar ServerState;\n(function (ServerState) {\n    ServerState[ServerState[\"joining\"] = 0] = \"joining\";\n    ServerState[ServerState[\"running\"] = 1] = \"running\";\n    ServerState[ServerState[\"final\"] = 2] = \"final\";\n})(ServerState = exports.ServerState || (exports.ServerState = {}));\nvar ControllerData = /** @class */ (function () {\n    function ControllerData(x, y) {\n        if (x === void 0) { x = 0; }\n        if (y === void 0) { y = 0; }\n        this.x = x;\n        this.y = y;\n        this.id = 0;\n    }\n    return ControllerData;\n}());\nexports.ControllerData = ControllerData;\nvar PlayerState;\n(function (PlayerState) {\n    PlayerState[PlayerState[\"idle\"] = 0] = \"idle\";\n    PlayerState[PlayerState[\"dead\"] = 1] = \"dead\";\n    PlayerState[PlayerState[\"running\"] = 2] = \"running\";\n    PlayerState[PlayerState[\"interacting\"] = 3] = \"interacting\";\n})(PlayerState = exports.PlayerState || (exports.PlayerState = {}));\n\n\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"../common/index\");\nvar Controller = /** @class */ (function () {\n    function Controller(client) {\n        var _this = this;\n        this.client = client;\n        this.startPos = undefined;\n        document.addEventListener('DOMContentLoaded', function () {\n            _this.virtualController();\n            _this.client.updateServerState(_this.updateView);\n        });\n    }\n    Controller.prototype.updateView = function (serverState) {\n        switch (serverState) {\n            case ser:\n        }\n    };\n    Controller.prototype.virtualController = function () {\n        var _this = this;\n        document.querySelectorAll('controller')[0].addEventListener('touchstart', function (ev) {\n            console.log('touchstart');\n            _this.startPos = [ev.targetTouches[0].clientX, ev.targetTouches[0].clientY];\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchmove', function (ev) {\n            if (_this.startPos !== undefined) {\n                _this.client.sendControllerData(new index_1.ControllerData(ev.targetTouches[0].clientX - _this.startPos[0], ev.targetTouches[0].clientY - _this.startPos[1]));\n            }\n        });\n        document.querySelectorAll('controller')[0].addEventListener('touchend', function (ev) {\n            _this.startPos = undefined;\n        });\n    };\n    Controller.prototype.splashscreen = function () {\n        var _this = this;\n        document.querySelectorAll('splashscreen > button').forEach(function (btn) {\n            var character = document.querySelectorAll('splashscreen > character')[0];\n            var isPlayerAngryDad = _this.client.toggleAngryDad();\n            if (isPlayerAngryDad) {\n                character.innerHTML = 'You would like to be angry dad!';\n            }\n            else {\n                character.innerHTML = 'You would like to be a wichtel!';\n            }\n        });\n        var timeUntilStartInterval = setInterval(function () {\n            var timeUntilStart = _this.client.getTimeUntilStart();\n            document.querySelectorAll('splashscreen > time')[0].innerHTML = timeUntilStart;\n            if (timeUntilStart === 0) {\n                clearInterval(timeUntilStartInterval);\n            }\n        }, 1000);\n    };\n    return Controller;\n}());\nvar client = new index_1.Client();\nnew Controller(client);\n\n\n\n},{\"../common/index\":1}]},{},[2]);\n\n//# sourceMappingURL=index.js.map\n"]}